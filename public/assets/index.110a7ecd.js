var Ne=Object.defineProperty;var fe=Object.getOwnPropertySymbols;var Le=Object.prototype.hasOwnProperty,Je=Object.prototype.propertyIsEnumerable;var ye=(t,e,n)=>e in t?Ne(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ve=(t,e)=>{for(var n in e||(e={}))Le.call(e,n)&&ye(t,n,e[n]);if(fe)for(var n of fe(e))Je.call(e,n)&&ye(t,n,e[n]);return t};import{c as C,r as f,o as i,a,b as s,d as I,w as g,t as m,e as k,T as Q,f as P,g as y,h as v,v as D,i as h,F as re,n as S,j as b,k as se,l as ke,m as B,p as $,q as N,s as ae,_ as Ee,u as Ge,x as Y,R as Pe,y as X,z as H,A as Ve,C as ne,D as ie,B as de,E as ce,G as Fe,H as le,I as ue,J as pe,K as je,L as Re,M as He,V as Qe,N as Ke,O as qe,P as ze,Q as We,S as Ye,U as Xe,W as Ze}from"./vendor.e0d7c679.js";const et=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const p of r.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&l(p)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}};et();var M=(t,e)=>{const n=t.__vccOpts||t;for(const[l,o]of e)n[l]=o;return n};const tt={created(){this.$store.dispatch("loadBoards"),this.$store.dispatch("loadUsers")},components:{}};function st(t,e,n,l,o,r){const p=f("router-view");return i(),C(p)}var ot=M(tt,[["render",st]]);const rt={name:"app header",data(){return{}},methods:{async logout(){try{await this.$store.dispatch("logout")}catch(t){console.log(t)}}},created(){window.onscroll=function(){var t=document.getElementById("header");window.scrollY>10?(t.style.backgroundColor="white",t.style.boxShadow="0px 3px 3px 0px rgba(0,0,0,0.3)"):(t.style.backgroundColor="",t.style.boxShadow="")}},computed:{member(){return this.$store.getters.loggedinUser}},components:{}},nt={id:"header",class:"home-header"},it=s("div",{class:"logo"},[s("span",null,[s("i",{class:"fa-brands fa-trello"})]),k(),s("h2",null,"Trellox")],-1),lt={key:0,class:"guest-nav"},at=k("Log in"),dt=k("Sign up"),ct={key:1,class:"member-nav"};function ut(t,e,n,l,o,r){const p=f("router-link");return i(),a("header",nt,[it,s("nav",null,[r.member?(i(),a("div",ct,[s("a",{onClick:e[0]||(e[0]=d=>this.$router.push("/workspace"))},"Welcome "+m(r.member.fullname.split(" ")[0]),1)])):(i(),a("div",lt,[I(p,{to:"/login"},{default:g(()=>[at]),_:1}),I(p,{to:"/signup"},{default:g(()=>[dt]),_:1})]))])])}var pt=M(rt,[["render",ut]]);const ht={name:"home",data(){return{companyUrls:["src/assets/images/google-logo.jpg","src/assets/images/microsoft-logo.png","src/assets/images/meta-logo.jpg"]}},methods:{toWorkSpace(){this.$router.push("/workspace")}},computed:{},components:{homeHeader:pt}},mt={class:"home-wrapper"},gt={class:"home-view main-layout"},_t={class:"topside"},ft=s("h1",null,"Trellox helps teams move work forward.",-1),yt=s("p",null,"Collaborate, manage projects, and reach new productivity peaks. From high rises to the home office, the way your team works is unique accomplish it all with Trellox.",-1),vt=k(" Start demo "),bt=s("span",null,[s("i",{class:"fa-solid fa-arrow-right"})],-1),kt=[vt,bt],Ct=s("div",{class:"background"},null,-1),wt=s("div",{class:"middle"},[s("h1",null,"It\u2019s more than work. It\u2019s a way of working together."),s("p",null," It\u2019s more than work. It\u2019s a way of working together. Start with a Trellox board, lists, and cards. Customize and expand with more features as your teamwork grows. Manage projects, organize tasks, and build team spirit\u2014all in one place. "),s("img",{src:"https://res.cloudinary.com/trellox/image/upload/v1648555830/board_esjncu.png"})],-1);function Bt(t,e,n,l,o,r){const p=f("home-header");return i(),a("main",mt,[I(p),s("div",gt,[s("div",_t,[s("article",null,[ft,yt,s("button",{onClick:e[0]||(e[0]=(...d)=>r.toWorkSpace&&r.toWorkSpace(...d))},kt)]),Ct]),wt])])}var $t=M(ht,[["render",Bt]]);const St={name:"login-view",data(){return{failed:!1,loginCred:{email:"",password:""}}},methods:{async login(){(!this.loginCred.email||!this.loginCred.password)&&this.failedLog();try{await this.$store.dispatch({type:"login",userCred:this.loginCred}),this.$router.push("/workspace")}catch{this.failedLog()}},failedLog(){this.failed=!0,setTimeout(()=>{this.failed=!1},6e3)},async googleSignup(){try{const t=await this.$gAuth.signIn();if(console.log(t),!t)return;this.googleUser={email:t.Du.tv,fullname:t.Du.tf,username:t.Du.tf.split(" ").join("").toLowerCase(),password:"google",boardIds:[],imgUrl:t.Du.eN},await this.$store.dispatch({type:"signup",userCred:JSON.parse(JSON.stringify(this.googleUser))}),this.$router.push("/workspace")}catch(t){console.log(t)}}},computed:{},components:{}},xt={class:"login-view"},Mt=s("span",null,[s("i",{class:"fa-brands fa-trello"})],-1),It=s("h2",null,"Trellox",-1),Dt=[Mt,It],Tt={class:"login-container"},At={key:0,class:"failed"},Ut=s("p",null,"Logged in failed. Please enter valid email or password.",-1),Ot=[Ut],Nt=s("h3",null,"Log in to Trellox",-1),Lt=s("span",{class:"or"},"OR",-1),Jt=s("img",{src:"https://res.cloudinary.com/trellox/image/upload/v1648921835/google_pxddpi.svg"},null,-1),Et=s("h3",null,"Continue with Google",-1),Gt=[Jt,Et],Pt=s("hr",null,null,-1),Vt=k("Sign up for an account");function Ft(t,e,n,l,o,r){const p=f("router-link");return i(),a("section",xt,[s("div",{onClick:e[0]||(e[0]=d=>this.$router.push("/")),class:"logo"},Dt),s("div",Tt,[I(Q,{name:"failed"},{default:g(()=>[o.failed?(i(),a("div",At,Ot)):h("",!0)]),_:1}),Nt,s("form",{onKeyup:e[3]||(e[3]=P((...d)=>r.login&&r.login(...d),["enter"])),onSubmit:e[4]||(e[4]=y((...d)=>r.login&&r.login(...d),["prevent"])),class:"user-crad"},[v(s("input",{type:"email","onUpdate:modelValue":e[1]||(e[1]=d=>o.loginCred.email=d),placeholder:"Enter email"},null,512),[[D,o.loginCred.email]]),v(s("input",{type:"password","onUpdate:modelValue":e[2]||(e[2]=d=>o.loginCred.password=d),placeholder:"Enter password"},null,512),[[D,o.loginCred.password]])],32),s("button",{onClick:e[5]||(e[5]=(...d)=>r.login&&r.login(...d)),class:"login-btn"},"Log in"),Lt,s("div",{class:"google",onClick:e[6]||(e[6]=(...d)=>r.googleSignup&&r.googleSignup(...d))},Gt),Pt,I(p,{to:"/signup"},{default:g(()=>[Vt]),_:1})])])}var jt=M(St,[["render",Ft]]);const Rt={name:"",data(){return{failed:!1,signupCred:{email:"",username:"",password:"",fullname:"",boardIds:[],imgUrl:null}}},methods:{async signup(){if((!this.signupCred.email||!this.signupCred.password||!this.signupCred.fullname)&&this.failedLog(),!(this.signupCred.fullname.split(" ").length<=1))try{const t=this.signupCred.fullname.split(" ");this.signupCred.fullname=t.reduce((e,n)=>e+" "+this.capitalizeFirstLetter(n),""),this.signupCred.fullname=this.signupCred.fullname.trim(),this.signupCred.username=this.signupCred.fullname.split(" ").join("").toLowerCase(),await this.$store.dispatch({type:"signup",userCred:this.signupCred}),this.$router.push("/workspace")}catch{console.log("error")}},async googleSignup(){try{const t=await this.$gAuth.signIn();if(!t)return;this.googleUser={email:t.Du.tv,fullname:t.Du.tf,username:t.Du.tf.split(" ").join("").toLowerCase(),password:"google",boardIds:[],imgUrl:t.Du.eN},await this.$store.dispatch({type:"signup",userCred:JSON.parse(JSON.stringify(this.googleUser))}),this.$router.push("/workspace")}catch(t){console.log(t)}},capitalizeFirstLetter(t){return t.charAt(0).toUpperCase()+t.slice(1)},failedLog(){this.failed=!0,setTimeout(()=>{this.failed=!1},6e3)}},computed:{},components:{}},Ht={class:"signup-view"},Qt=s("span",null,[s("i",{class:"fa-brands fa-trello"})],-1),Kt=s("h2",null,"Trellox",-1),qt=[Qt,Kt],zt={class:"login-container"},Wt={key:0,class:"failed"},Yt=s("p",null,"Sign up failed. Please enter valid email or password.",-1),Xt=[Yt],Zt=s("h3",null,"Sign up to Trellox",-1),es=s("span",{class:"or"},"OR",-1),ts=s("img",{src:"https://res.cloudinary.com/trellox/image/upload/v1648921835/google_pxddpi.svg"},null,-1),ss=s("h3",null,"Continue with Google",-1),os=[ts,ss],rs=s("hr",null,null,-1),ns=k("Already have an acount? Log in");function is(t,e,n,l,o,r){const p=f("router-link");return i(),a("section",Ht,[s("div",{onClick:e[0]||(e[0]=d=>this.$router.push("/")),class:"logo"},qt),s("div",zt,[I(Q,{name:"failed"},{default:g(()=>[o.failed?(i(),a("div",Wt,Xt)):h("",!0)]),_:1}),Zt,s("form",{onKeyup:e[4]||(e[4]=P((...d)=>r.signup&&r.signup(...d),["enter"])),onSubmit:e[5]||(e[5]=y((...d)=>r.signup&&r.signup(...d),["prevent"])),class:"user-crad"},[v(s("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=d=>o.signupCred.fullname=d),placeholder:"Enter fullname"},null,512),[[D,o.signupCred.fullname]]),v(s("input",{type:"email","onUpdate:modelValue":e[2]||(e[2]=d=>o.signupCred.email=d),placeholder:"Enter email"},null,512),[[D,o.signupCred.email]]),v(s("input",{type:"password","onUpdate:modelValue":e[3]||(e[3]=d=>o.signupCred.password=d),placeholder:"Enter password"},null,512),[[D,o.signupCred.password]])],32),s("button",{onClick:e[6]||(e[6]=(...d)=>r.signup&&r.signup(...d)),class:"login-btn"},"Sign up!"),es,s("div",{class:"google",onClick:e[7]||(e[7]=(...d)=>r.googleSignup&&r.googleSignup(...d))},os),rs,I(p,{to:"/login"},{default:g(()=>[ns]),_:1})])])}var ls=M(Rt,[["render",is]]);const as={name:"board-preview",props:{board:Object},data(){return{color:null}},async created(){try{if(this.board.style.bgImgUrl){const t=new re;this.color=await t.getColorAsync(this.board.style.bgImgUrl)}}catch(t){console.log(t)}},methods:{linearGradient(){var t;return this.color?t=this.color.isDark?"0.1":"0.35":t="0.1",`linear-gradient(rgba(0, 0, 0, ${t}),rgba(0, 0, 0, ${t})), `},async toggleStar(){const t=JSON.parse(JSON.stringify(this.board));t.isStarred=!t.isStarred,await this.$store.dispatch({type:"saveBoard",board:t})}},computed:{},components:{}},ds={class:"board-preview"};function cs(t,e,n,l,o,r){const p=f("router-link");return i(),a("section",ds,[I(p,{to:"/board/"+n.board._id},{default:g(()=>[s("div",{style:S({"background-image":r.linearGradient()+"url("+n.board.style.bgImgUrl+")","background-color":n.board.style.bgColor}),class:"board-preview-container"},null,4),s("span",{class:b([n.board.style.bgImgUrl?"shadow-text":"","txt-on-borad-img"])},m(n.board.title),3)]),_:1},8,["to"]),s("span",{class:b(["star",{full:n.board.isStarred}]),onClick:e[0]||(e[0]=d=>r.toggleStar())},null,2)])}var us=M(as,[["render",cs]]);const ps={props:{isFirstPage:{type:Boolean,default:!0}},created(){},data(){return{}},methods:{closeModal(){this.$emit("closeModal")},goBack(){this.$emit("goBack")}},computed:{},components:{},unmounted(){},emits:["closeModal","goBack"]},hs={class:"custom-modal-container"},ms={class:"custom-modal-header"},gs={class:"title"},_s={class:"custom-modal-main"},fs={class:"custom-modal-app-header"};function ys(t,e,n,l,o,r){return i(),a("article",hs,[s("section",ms,[n.isFirstPage?h("",!0):(i(),a("a",{key:0,onClick:e[0]||(e[0]=y((...p)=>r.goBack&&r.goBack(...p),["stop"])),class:"custom-back"})),s("span",gs,[se(t.$slots,"header")]),s("a",{onClick:e[1]||(e[1]=y((...p)=>r.closeModal&&r.closeModal(...p),["stop"])),class:"custom-close"})]),s("section",_s,[se(t.$slots,"default")]),s("section",fs,[se(t.$slots,"main")])])}var U=M(ps,[["render",ys]]);const G={delay:bs,getRandomInt:ks,makeId:Cs,makeAvatar:vs,getFormattedTime:ws};function vs(t){t=t.split(" ");var e=(t.split(" ")[0].split("")[0]+t.split(" ")[1].split("")[0]).toUpperCases();return e.toUpperCases()}function bs(t=1500){return new Promise(e=>{setTimeout(e,t)})}function ks(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t)+t)}function Cs(t=5){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",l=0;l<t;l++)e+=n.charAt(Math.floor(Math.random()*n.length));return e}function ws(t){const n=Date.now()-t;var l="",o;if(n<=5e3)l="just now";else if(n<=2e4)l="a few seconds ago";else if(n<=12e4)l="a minute ago";else if(n<=36e5)o=Math.floor(n/60/1e3),l=o+" minutes ago";else if(n<=72e5)l="a hour ago";else if(n<=864e5)o=Math.floor(n/60/60/1e3),l=o+" hours ago";else{t=new Date(t);const r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],p=t.getMinutes(),d=t.getHours();l+=r[t.getMonth()]+" ",l+=t.getDate()+" at ",l+=d<10?"0"+d:d,l+=":",l+=p<10?"0"+p:p}return l}const Bs="/api/";var $s=ke.create({withCredentials:!0});const j={get(t,e){return te(t,"GET",e)},post(t,e){return te(t,"POST",e)},put(t,e){return te(t,"PUT",e)},delete(t,e){return te(t,"DELETE",e)}};async function te(t,e="GET",n=null){try{return(await $s({url:`${Bs}${t}`,method:e,data:n,params:e==="GET"?n:null})).data}catch(l){throw console.log(`Had Issues ${e}ing to the backend, endpoint: ${t}, with data:`,n),console.dir(l),l.response&&l.response.status===401&&Oe.push("/login"),l}}ke.defaults.withCredentials=!0;const A={query:Ss,getBoardById:xs,removeBoard:Ms,updateBoard:Is};async function Ss(t){return await j.get("board",t)}async function xs(t,e={type:"none"}){return await j.get(`board/${t}`,e)}async function Ms(t){return await j.delete(`board/${t}`)}async function Is(t){return t._id?await j.put(`board/${t._id}`,t):await j.post("board",t)}const he="loggedinUser",F={login:Ts,signup:As,logout:Us,getLoggedinUser:Os,getUsers:Ds};async function Ds(){return await j.get("user")}async function Ts(t){const e=await j.post("auth/login",t);if(e)return Ce(e)}async function As(t){const e=await j.post("auth/signup",t);return Ce(e)}async function Us(){return sessionStorage.removeItem(he),await j.post("auth/logout")}function Ce(t){return sessionStorage.setItem(he,JSON.stringify(t)),t}function Os(){return JSON.parse(sessionStorage.getItem(he)||"null")}const V={getEmptyBoard:Ns,addGroup:Ls,editGroup:Js,removeGroup:Es,addCard:Gs,getCardById:Ps,updateCard:Vs,removeCard:Fs};function Ns(){return{title:"",recentlyViewed:Date.now(),isStarred:!1,createdBy:F.getLoggedinUser()||{},style:{bgImUrl:"",bgColor:"",bgHeader:""},labels:js(),members:F.getLoggedinUser()?[F.getLoggedinUser()]:[],groups:[oe("Todo"),oe("Doing"),oe("Done")],activities:[],filterBy:{by:{none:!1,options:[]},due:{none:!1,over:!1,tomorrow:!1},label:{none:!1,options:[]}}}}async function Ls(t,e){try{var n=await A.getBoardById(t);return n.groups.push(oe(e)),await A.updateBoard(n)}catch(l){throw l}}async function Js(t,e){try{var n=await A.getBoardById(t);const l=n.groups.findIndex(o=>o.id===e.id);return n.groups[l]=e,await A.updateBoard(n)}catch(l){throw l}}async function Es(t,e){try{var n=await A.getBoardById(t);const l=n.groups.findIndex(o=>o.id===e);return n.groups.splice(l,1)[0],await A.updateBoard(n)}catch(l){throw l}}async function Gs(t,e,n){try{var l=await A.getBoardById(t);const o=l.groups.findIndex(r=>r.id===e);return l.groups[o].cards.push(Rs(n)),await A.updateBoard(l)}catch(o){throw o}}async function Ps(t,e){try{var n=await A.getBoardById(t),l=null;return n.groups.forEach(o=>{o.cards.forEach(r=>{r.id===e&&(l={groupId:o.id,card:r})})}),l}catch(o){throw o}}async function Vs(t,e,n){try{const l=await A.getBoardById(t),o=l.groups.findIndex(p=>p.id===e),r=l.groups[o].cards.findIndex(p=>p.id===n.id);return l.groups[o].cards.splice(r,1,n),await A.updateBoard(l)}catch(l){throw console.log("Can not update card"),l}}async function Fs(t,e,n){try{var l=await A.getBoardById(t);const o=l.groups.findIndex(p=>p.id===e),r=l.groups[o].cards.findIndex(p=>p.id===n);return l.groups[o].cards.splice(r,1)[0],await A.updateBoard(l)}catch(o){throw o}}function js(){return[{id:"l101",title:"Copy Request",className:"color0"},{id:"l102",title:"One more step",className:"color1"},{id:"l103",title:"Priority",className:"color2"},{id:"l104",title:"Design Team",className:"color3"},{id:"l105",title:"Product Marketing",className:"color4"},{id:"l106",title:"Trellox Tip",className:"color5"},{id:"l107",title:"Help",className:"color6"}]}function oe(t=""){return{id:G.makeId(),title:t,cards:[]}}function Rs(t=""){return{id:G.makeId(),title:t,status:"",description:"",dueDate:null,createdAt:Date.now(),attachments:[],checklists:[],comments:[],memberIds:[],labelIds:[],isShown:!0,createdBy:F.getLoggedinUser()||{},stickers:[],style:{type:"",cover:"",fullCover:!1,isDark:!0}}}const Hs={name:"",data(){return{newBoard:V.getEmptyBoard(),imagePicker:this.$store.getters.imagePicker,colorPicker:this.$store.getters.boardColors.slice(0,5)}},methods:{closeModal(){this.$emit("closeModal")},setBg(t){this.newBoard.style.bgColor="",this.newBoard.style.bgImgUrl=t},setColor(t){this.newBoard.style.bgImgUrl="",this.newBoard.style.bgColor=t.body,this.newBoard.style.bgHeader=t.header},async createBoard(){if(!this.newBoard.title)return;const t=await this.$store.dispatch({type:"saveBoard",board:this.newBoard});this.$router.push(`/board/${t._id}`),this.newBoard=V.getEmptyBoard()}},created(){},computed:{},components:{customModal:U}},Qs=k(" Create board "),Ks=s("img",{src:"https://res.cloudinary.com/trellox/image/upload/v1648370075/demo-board_kga9ov.svg",alt:"demo board"},null,-1),qs=[Ks],zs={class:"background-picker"},Ws=s("h4",null,"Background",-1),Ys={class:"image-picker"},Xs=["onClick"],Zs=["src"],eo={class:"color-picker"},to=["onClick"],so=s("h4",{class:"board-title"},[k("Board title "),s("span",null,"*")],-1);function oo(t,e,n,l,o,r){const p=f("custom-modal");return i(),C(p,{class:"board-add",onCloseModal:r.closeModal},{header:g(()=>[Qs]),default:g(()=>[s("div",{style:S({"background-image":"url("+o.newBoard.style.bgImgUrl+")","background-color":o.newBoard.style.bgColor}),class:"demo-board"},qs,4),s("div",zs,[Ws,s("ul",Ys,[(i(!0),a($,null,B(o.imagePicker,d=>(i(),a("li",{onClick:c=>r.setBg(d),key:d},[s("img",{src:d,alt:"board background image"},null,8,Zs)],8,Xs))),128))]),s("ul",eo,[(i(!0),a($,null,B(o.colorPicker,d=>(i(),a("li",{onClick:c=>r.setColor(d),key:d},[s("div",{class:"color",style:S({"background-color":d.body})},null,4)],8,to))),128))]),so,v(s("input",{"onUpdate:modelValue":e[0]||(e[0]=d=>o.newBoard.title=d),type:"text",placeholder:"Add board title"},null,512),[[D,o.newBoard.title]]),s("button",{onClick:e[1]||(e[1]=(...d)=>r.createBoard&&r.createBoard(...d))},"Create")])]),_:1},8,["onCloseModal"])}var ro=M(Hs,[["render",oo]]);const no={name:"board-list",props:{boards:Array,showCreate:Boolean},data(){return{openBoardCreation:!1,posLeft:null,posTop:null}},components:{boardPreview:us,boardAdd:ro},methods:{openCreateBoard(t){this.calcPosition(t.target.getBoundingClientRect()),this.openBoardCreation=!0},calcPosition(t){var{left:e,top:n}=t;window.innerWidth-e<500?this.posLeft=e-320:this.posLeft=e+160,this.posTop=n-350}},computed:{}},io={class:"boards-area"},lo={class:"boards-name"},ao=s("span",{class:"icon"},null,-1),co={class:"title"},uo={class:"board-list"},po={class:"boards"},ho=s("section",{class:"board-preview new-board"},[s("div",{class:"board-preview-container"},[s("span",{class:"txt-on-borad-img"},"Create new board")])],-1),mo=[ho];function go(t,e,n,l,o,r){const p=f("board-preview"),d=f("board-add");return i(),a("section",io,[s("div",lo,[ao,s("h3",co,[se(t.$slots,"boards-name")])]),s("section",uo,[s("ul",po,[(i(!0),a($,null,B(n.boards,c=>(i(),a("li",{key:c._id},[I(p,{board:c},null,8,["board"])]))),128)),n.showCreate?(i(),a("li",{key:0,onClick:e[0]||(e[0]=c=>r.openCreateBoard(c))},mo)):h("",!0)]),o.openBoardCreation?(i(),C(d,{key:0,onCloseModal:e[1]||(e[1]=c=>o.openBoardCreation=!1),style:S(`top: ${o.posTop}px; left: ${o.posLeft}px`)},null,8,["style"])):h("",!0)])])}var _o=M(no,[["render",go]]);const fo={name:"user-modal",data(){return{openActivity:!1}},methods:{},computed:{member(){return this.$store.getters.loggedinUser},checkMember(){return this.member?this.member.fullname.split(" ")[0].split("")[0]+this.member.fullname.split(" ")[1].split("")[0]:"G"},async logout(){this.$emit("logout")},memberActivity(){var t;return(t=this.$store.getters.currBoard)==null?void 0:t.activities.filter(e=>{e.byMember._id,this.$store.getters.loggedinUser._id})}},components:{customModal:U}},yo=k(" Account "),vo={key:0},bo={class:"member-container"},ko=["title"],Co=["src"],wo={key:1},Bo={class:"member-details"},$o=s("hr",null,null,-1),So={class:"member-options"},xo={key:1},Mo={key:0},Io={key:1};function Do(t,e,n,l,o,r){const p=f("custom-modal");return r.member?(i(),C(p,{key:0,class:"user-modal"},{header:g(()=>[yo]),main:g(()=>{var d,c;return[o.openActivity?(i(),a("div",xo,[!((c=r.memberActivity)!=null&&c.length)||!r.memberActivity?(i(),a("p",Mo," No activities to display. ")):(i(),a("ul",Io,[(i(!0),a($,null,B(r.memberActivity,_=>(i(),a("li",{key:_.id},[s("p",null,"You "+m(_.txt)+".",1),s("p",null,"At "+m(_.createdAt),1)]))),128))]))])):(i(),a("div",vo,[s("div",bo,[s("div",{class:"avatar-container",title:r.member?r.member.fullname:"Guest"},[(d=r.member)!=null&&d.imgUrl?(i(),a("img",{key:0,src:r.member.imgUrl,alt:""},null,8,Co)):(i(),a("span",wo,m(r.checkMember),1))],8,ko),s("div",Bo,[s("h3",null,m(r.member.fullname),1),s("h5",null,m(r.member.email),1)])]),$o,s("ul",So,[s("li",{onClick:e[0]||(e[0]=y(_=>o.openActivity=!0,["stop"]))},"Activity"),s("li",{onClick:e[1]||(e[1]=(..._)=>r.logout&&r.logout(..._))},"Log out")])]))]}),_:1})):h("",!0)}var To=M(fo,[["render",Do]]);const Ao={name:"",data(){return{}},components:{customModal:U},methods:{toggleStar(t){this.$emit("toggleStar",t)}},computed:{boards(){return this.$store.getters.boards}}},Uo=k(" Recent boards "),Oo=["onClick"],No=["onClick"];function Lo(t,e,n,l,o,r){const p=f("custom-modal");return i(),C(p,{class:"header-modal"},{header:g(()=>[Uo]),default:g(()=>[s("ul",null,[(i(!0),a($,null,B(r.boards,d=>(i(),a("li",{key:d._id,onClick:c=>this.$router.push("/board/"+d._id)},[s("section",{class:"bg",style:S({"background-image":"url("+d.style.bgImgUrl+")","background-color":d.style.bgColor})},null,4),s("div",null,[k(m(d.title)+" ",1),s("span",{class:b(["star",{full:d.isStarred}]),onClick:y(c=>r.toggleStar(d),["stop"])},null,10,No)])],8,Oo))),128))])]),_:1})}var Jo=M(Ao,[["render",Lo]]);const Eo={name:"",data(){return{}},components:{customModal:U},methods:{toggleStar(t){this.$emit("toggleStar",t)}},computed:{starredBoards(){var t=this.$store.getters.boards;return t.filter(e=>e.isStarred)}}},Go=k(" Starred boards "),Po={key:0},Vo=["onClick"],Fo=["onClick"],jo={key:1,class:"starred-container"},Ro=s("img",{src:"https://a.trellocdn.com/prgb/dist/images/starred-boards-menu/starred-board.cc47d0a8c646581ccd08.svg"},null,-1),Ho=s("p",null,"Star important boards to access them quickly and easily.",-1),Qo=[Ro,Ho];function Ko(t,e,n,l,o,r){const p=f("custom-modal");return i(),C(p,{class:"header-modal"},{header:g(()=>[Go]),default:g(()=>[r.starredBoards.length?(i(),a("ul",Po,[(i(!0),a($,null,B(r.starredBoards,d=>(i(),a("li",{key:d._id,onClick:c=>this.$router.push("/board/"+d._id)},[s("section",{class:"bg",style:S({"background-image":"url("+d.style.bgImgUrl+")","background-color":d.style.bgColor})},null,4),s("div",null,[k(m(d.title)+" ",1),s("span",{class:b(["star",{full:d.isStarred}]),onClick:y(c=>r.toggleStar(d),["stop"])},null,10,Fo)])],8,Vo))),128))])):(i(),a("div",jo,Qo))]),_:1})}var qo=M(Eo,[["render",Ko]]);const zo={name:"",props:{boards:Array},data(){return{}},components:{customModal:U},methods:{toggleStar(t){this.$emit("toggleStar",t)},async setCurrBoard(t){await this.$store.dispatch({type:"setCurrBoard",boardId:t}),this.$router.push("/board/"+t)}},computed:{}},Wo={class:"search-modal"},Yo=s("div",{class:"title"},"Recent boards",-1),Xo={key:0},Zo=["onClick"],er=["onClick"],tr={class:"name"},sr={key:1,class:"not-found"};function or(t,e,n,l,o,r){const p=f("custom-modal");return i(),C(p,{class:"search-modal-container"},{default:g(()=>[s("section",Wo,[Yo,n.boards.length?(i(),a("ul",Xo,[(i(!0),a($,null,B(n.boards,d=>(i(),a("li",{key:d._id,onClick:c=>r.setCurrBoard(d._id)},[s("span",{class:b(["star",{full:d.isStarred}]),onClick:y(c=>r.toggleStar(d),["stop"])},null,10,er),s("section",{class:"bg",style:S({"background-image":"url("+d.style.bgImgUrl+")","background-color":d.style.bgColor})},null,4),s("div",tr,m(d.title),1)],8,Zo))),128))])):(i(),a("div",sr,"We couldn't find any boards that matched your search."))])]),_:1})}var rr=M(zo,[["render",or]]);const nr={name:"",props:{posLeft:Number,posTop:Number},data(){return{openBoardCreation:!1,newBoard:V.getEmptyBoard(),imagePicker:this.$store.getters.imagePicker,colorPicker:this.$store.getters.boardColors.slice(0,5)}},methods:{closeModal(){this.$emit("closeModal")},setBg(t){this.newBoard.style.bgColor="",this.newBoard.style.bgImgUrl=t},setColor(t){this.newBoard.style.bgImgUrl="",this.newBoard.style.bgColor=t.body,this.newBoard.style.bgHeader=t.header},async createBoard(){const t=await this.$store.dispatch({type:"saveBoard",board:this.newBoard});await this.$store.dispatch({type:"setCurrBoard",boardId:t._id}),this.$router.push(`/board/${t._id}`),this.newBoard=V.getEmptyBoard()}},computed:{},components:{customModal:U}},ir={class:"create-board-modal-container"},lr=k(" Create "),ar=s("h3",null,"Create Board",-1),dr=s("p",null,"A board is made up of cards ordered on lists. Use it to manage projects, track information, or organize anything.",-1),cr=[ar,dr],ur=k(" Create board "),pr=s("img",{src:"https://res.cloudinary.com/trellox/image/upload/v1648370075/demo-board_kga9ov.svg",alt:"demo board"},null,-1),hr=[pr],mr={class:"background-picker"},gr=s("h4",null,"Background",-1),_r={class:"image-picker"},fr=["onClick"],yr=["src"],vr={class:"color-picker"},br=["onClick"],kr=s("h4",{class:"board-title"},[k("Board title "),s("span",null,"*")],-1);function Cr(t,e,n,l,o,r){const p=f("custom-modal");return i(),a("section",ir,[o.openBoardCreation?h("",!0):(i(),C(p,{key:0,onCloseModal:r.closeModal,class:"create-board-modal",style:S(`top: ${n.posTop}px; left: ${n.posLeft}px`)},{header:g(()=>[lr]),main:g(()=>[s("ul",null,[s("li",{onClick:e[0]||(e[0]=y(d=>o.openBoardCreation=!0,["stop"])),class:"create"},cr)])]),_:1},8,["onCloseModal","style"])),o.openBoardCreation?(i(),C(p,{key:1,onCloseModal:r.closeModal,class:"create-board-modal board-add",style:S(`top: ${n.posTop}px; left: ${n.posLeft}px`)},{header:g(()=>[ur]),default:g(()=>[s("div",{style:S({"background-image":"url("+o.newBoard.style.bgImgUrl+")","background-color":o.newBoard.style.bgColor}),class:"demo-board"},hr,4),s("div",mr,[gr,s("ul",_r,[(i(!0),a($,null,B(o.imagePicker,d=>(i(),a("li",{onClick:c=>r.setBg(d),key:d},[s("img",{src:d,alt:"board background image"},null,8,yr)],8,fr))),128))]),s("ul",vr,[(i(!0),a($,null,B(o.colorPicker,d=>(i(),a("li",{onClick:c=>r.setColor(d),key:d},[s("div",{class:"color",style:S({"background-color":d.body})},null,4)],8,br))),128))]),kr,v(s("input",{"onUpdate:modelValue":e[1]||(e[1]=d=>o.newBoard.title=d),type:"text",placeholder:"Add board title"},null,512),[[D,o.newBoard.title]]),s("button",{onClick:e[2]||(e[2]=(...d)=>r.createBoard&&r.createBoard(...d))},"Create")])]),_:1},8,["onCloseModal","style"])):h("",!0)])}var wr=M(nr,[["render",Cr]]);const Br={name:"",data(){return{openCreate:!1,openUser:!1,cmpName:null,posLeft:null,posTop:null,filterBy:null}},components:{userModal:To,recentModal:Jo,createBoardModal:wr,starredModal:qo,searchModal:rr},methods:{openModal(t,e){e&&this.calcPosition(e.target.getBoundingClientRect()),this.cmpName=t},closeModal(){this.cmpName=null},async logout(){try{await this.$store.dispatch("logout"),this.$router.push("/")}catch(t){console.log(t)}},calcPosition(t){var{left:e}=t;const n=window.innerWidth;n-e<310&&(e=n-310),this.posTop=50,this.posLeft=e},async toggleStar(t){t.isStarred=!t.isStarred,await this.$store.dispatch({type:"saveBoard",board:t})},checkPath(){this.$route.path==="/workspace"?this.$router.push("/"):this.$route.name==="board"&&this.$router.push("/workspace")}},computed:{member(){return this.$store.getters.loggedinUser},checkMember(){return this.member?this.member.fullname.split(" ")[0].split("")[0]+this.member.fullname.split(" ")[1].split("")[0]:"G"},boards(){var t=this.$store.getters.boards;if(!this.filterBy)return t;const e=new RegExp(this.filterBy,"i");return t.filter(n=>e.test(n.title))}}},$r={class:"app-header"},Sr={class:"left-header"},xr=s("i",{class:"fa-brands fa-trello"},null,-1),Mr=s("p",null,"Trellox",-1),Ir=[xr,Mr],Dr=s("i",{class:"fa-solid fa-chevron-down"},null,-1),Tr=[Dr],Ar=s("i",{class:"fa-solid fa-chevron-down"},null,-1),Ur=[Ar],Or={class:"right-header"},Nr=s("i",{class:"fa-solid fa-magnifying-glass"},null,-1),Lr=s("button",{class:"notifications"},[s("i",{class:"fa-solid fa-bell"})],-1),Jr=["title"],Er=["src"],Gr={key:1};function Pr(t,e,n,l,o,r){var d;const p=N("click-outside");return i(),a("header",$r,[s("div",Sr,[s("div",{onClick:e[0]||(e[0]=(...c)=>r.checkPath&&r.checkPath(...c)),class:"logo"},Ir),s("button",{class:"recent",onClick:e[1]||(e[1]=c=>r.openModal("recent-modal",c))},Tr),s("button",{class:"starred",onClick:e[2]||(e[2]=c=>r.openModal("starred-modal",c))},Ur),s("button",{onClick:e[3]||(e[3]=c=>r.openModal("create-board-modal",c))})]),s("div",Or,[s("label",null,[Nr,v(s("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=c=>o.filterBy=c),onClick:e[5]||(e[5]=c=>r.openModal("search-modal")),placeholder:"Search"},null,512),[[D,o.filterBy]])]),Lr,s("div",{onClick:e[6]||(e[6]=c=>r.openModal("user-modal",c)),class:"avatar-container",title:r.member?r.member.fullname:"Guest"},[(d=r.member)!=null&&d.imgUrl?(i(),a("img",{key:0,src:r.member.imgUrl,alt:""},null,8,Er)):(i(),a("span",Gr,m(r.checkMember),1))],8,Jr)]),o.cmpName?v((i(),C(ae(o.cmpName),{key:0,posLeft:o.posLeft,posTop:o.posTop,boards:r.boards,onToggleStar:r.toggleStar,onCloseModal:r.closeModal,onLogout:r.logout,style:S(`top: ${o.posTop}px; left: ${o.posLeft}px`)},null,8,["posLeft","posTop","boards","onToggleStar","onCloseModal","onLogout","style"])),[[p,()=>r.closeModal()]]):h("",!0)])}var we=M(Br,[["render",Pr]]);const Vr={name:"workspace-view",components:{boardList:_o,AppHeader:we},data(){return{}},methods:{setCurrpage(t){this.currpage=t}},computed:{boards(){return this.$store.getters.boards},starredBoards(){var t=this.$store.getters.boards;return t.filter(e=>e.isStarred)},noneStarredBoards(){var t=this.$store.getters.boards;return t.filter(e=>!e.isStarred)}}},Fr={class:"workspace-view"},jr={class:"workspace-wrapper"},Rr={class:"workspace-nav"},Hr={class:"nav-options-top"},Qr=s("span",{class:"board-icon icon"},null,-1),Kr=s("span",{class:"view-name"},"Boards",-1),qr=s("span",{class:"home-icon icon"},null,-1),zr=s("span",{class:"view-name"},"Home",-1),Wr={class:"board-list-container"},Yr=k("Starred"),Xr=k("Recently viewed"),Zr=k("YOUR WORKSPACE");function en(t,e,n,l,o,r){const p=f("app-header"),d=f("router-link"),c=f("board-list");return i(),a("section",Fr,[I(p,{class:"workspace-header"}),s("div",jr,[s("nav",Rr,[s("div",Hr,[I(d,{to:"/workspace",class:"active"},{default:g(()=>[Qr,Kr]),_:1}),I(d,{to:"/"},{default:g(()=>[qr,zr]),_:1})])]),s("div",Wr,[I(c,{boards:r.starredBoards,showCreate:!1,class:"starred"},{"boards-name":g(()=>[Yr]),_:1},8,["boards"]),I(c,{boards:r.noneStarredBoards,showCreate:!1,class:"recentlyViewed"},{"boards-name":g(()=>[Xr]),_:1},8,["boards"]),I(c,{boards:r.boards,showCreate:!0,class:"yourWorkspace"},{"boards-name":g(()=>[Zr]),_:1},8,["boards"])])])])}var tn=M(Vr,[["render",en]]);const sn={props:{card:Object,posLeft:Number},components:{customModal:U},data(){return{labelIds:JSON.parse(JSON.stringify(this.card.labelIds)),newLabel:null,selectedColor:"color0",wantToDelete:!1,filterBy:""}},created(){},methods:{goBack(){this.newLabel=null},closeModal(){this.$emit("closeModal")},toggleLabel(t){const e=this.labelIds.findIndex(n=>n===t);e===-1?this.labelIds.push(t):this.labelIds.splice(e,1),this.save()},startCreating(t,e=!1){t&&!e?(this.newLabel=t,this.selectedColor=t.className):this.newLabel={title:e?t:"",className:this.selectedColor}},changeColor(t){this.newLabel.className=t,this.selectedColor=t},async saveLabel(){var t=this.$store.getters.currBoard,e=!1;if(this.newLabel.id){const n=t.labels.findIndex(l=>l.id===this.newLabel.id);t.labels.splice(n,1,this.newLabel)}else{e=!0;const n=this.labels.findIndex(l=>l.className===this.newLabel.className&&l.title===this.newLabel.title);n===-1?(this.newLabel.id=G.makeId(),t.labels.push(this.newLabel)):this.labelIds.findIndex(o=>o===this.labels[n].id)===-1&&this.labelIds.push(this.labels[n].id)}await this.$store.dispatch({type:"saveBoard",board:t}),e&&(this.labelIds.push(this.newLabel.id),this.save()),this.goBack()},async deleteLabel(){var t=this.$store.getters.currBoard;const e=t.labels.findIndex(n=>n.id===this.newLabel.id);t.labels.splice(e,1),t.groups=t.groups.map(n=>(n.cards=n.cards.map(l=>(l.labelIds=l.labelIds.filter(o=>o!==this.newLabel.id),l)),n)),await this.$store.dispatch({type:"saveBoard",board:t}),this.goBack(),this.wantToDelete=!1},save(){this.$emit("updateKey","labelIds",JSON.parse(JSON.stringify(this.labelIds)))}},computed:{labels(){var t=this.$store.getters.currBoard.labels;if(!this.filterBy)return t;const e=new RegExp(this.filterBy,"i");return t.filter(n=>e.test(n.title))},classColors(){var t=this.$store.getters.labelColors;return t.pop(),t},emptyColor(){return this.$store.getters.labelColors.pop()},btnTxt(){return this.newLabel.id?"Save":"Create"},titleTxt(){return this.newLabel.id?"Change label":"Create label"}},emits:["closeModal","updateKey"]},on={class:"label-picker"},rn=k(" Labels "),nn=s("h4",null,"Labels",-1),ln={class:"labels-container"},an=["onClick"],dn=["onClick"],cn={key:0,class:"v-icon"},un=s("label",{for:"name"},"Name",-1),pn=s("label",{for:"color"},"Select a color",-1),hn=["onClick"],mn={key:0,class:"v-icon"},gn={class:"empty-card-container"},_n={key:0,class:"v-icon"},fn=s("div",null,[s("p",null,"No color."),s("p",null,"This won't show up on the front of cards.")],-1),yn={class:"add-btn"},vn=k("Delete label?"),bn=s("p",null,"There is no undo. This will remove this label from all cards and destroy its history.",-1);function kn(t,e,n,l,o,r){const p=f("custom-modal"),d=N("focus");return i(),a("section",on,[!o.newLabel&&!o.wantToDelete?(i(),C(p,{key:0,onCloseModal:r.closeModal,onGoBack:r.goBack,style:S(`left: ${n.posLeft}px`)},{header:g(()=>[rn]),default:g(()=>[v(s("input",{"onUpdate:modelValue":e[0]||(e[0]=c=>o.filterBy=c),class:"custom-input",type:"text",placeholder:"Search labels..."},null,512),[[d],[D,o.filterBy]]),nn,s("ul",ln,[(i(!0),a($,null,B(r.labels,c=>(i(),a("li",{key:c.id,onClick:_=>r.toggleLabel(c.id)},[s("span",{class:"edit-label",onClick:y(_=>r.startCreating(c),["stop"])},null,8,dn),s("div",{class:b(["label-in-label-picker",c.className])},[k(m(c.title)+" ",1),o.labelIds.includes(c.id)?(i(),a("span",cn)):h("",!0)],2)],8,an))),128))]),r.labels.length?(i(),a("button",{key:0,class:"custom-btn",onClick:e[1]||(e[1]=y(c=>r.startCreating(null),["stop"]))},"Create new label")):(i(),a("button",{key:1,class:"custom-btn",onClick:e[2]||(e[2]=y(c=>r.startCreating(o.filterBy,!0),["stop"]))},'Create new "'+m(o.filterBy)+'"" label',1))]),_:1},8,["onCloseModal","onGoBack","style"])):h("",!0),o.newLabel&&!o.wantToDelete?(i(),C(p,{key:1,onCloseModal:r.closeModal,onGoBack:r.goBack,style:S(`left: ${n.posLeft}px`),isFirstPage:!1},{header:g(()=>[k(m(r.titleTxt),1)]),default:g(()=>[s("form",{onSubmit:e[6]||(e[6]=y((...c)=>r.saveLabel&&r.saveLabel(...c),["prevent"])),class:"form-label"},[un,v(s("input",{"onUpdate:modelValue":e[3]||(e[3]=c=>o.newLabel.title=c),id:"name",class:"custom-input",type:"text"},null,512),[[d],[D,o.newLabel.title]]),pn,s("div",null,[(i(!0),a($,null,B(r.classColors,c=>(i(),a("span",{key:c,class:b([c,"colorPalette"]),onClick:y(_=>r.changeColor(c),["stop"])},[o.selectedColor===c?(i(),a("span",mn)):h("",!0)],10,hn))),128))]),s("div",gn,[s("span",{class:b([r.emptyColor,"colorPalette"]),onClick:e[4]||(e[4]=y(c=>r.changeColor(r.emptyColor),["stop"]))},[o.selectedColor===r.emptyColor?(i(),a("span",_n)):h("",!0)],2),fn]),s("button",yn,m(r.btnTxt),1),o.newLabel.id?(i(),a("div",{key:0,class:"delete-btn",onClick:e[5]||(e[5]=y(c=>o.wantToDelete=!0,["stop"]))},"Delete")):h("",!0)],32)]),_:1},8,["onCloseModal","onGoBack","style"])):h("",!0),o.newLabel&&o.wantToDelete?(i(),C(p,{key:2,onCloseModal:r.closeModal,onGoBack:e[8]||(e[8]=c=>o.wantToDelete=!1),style:S(`left: ${n.posLeft}px`),isFirstPage:!1,class:"delete-mode"},{header:g(()=>[vn]),default:g(()=>[bn,s("div",{class:"delete-btn",onClick:e[7]||(e[7]=y((...c)=>r.deleteLabel&&r.deleteLabel(...c),["stop"]))},"Delete")]),_:1},8,["onCloseModal","style"])):h("",!0)])}var Be=M(sn,[["render",kn]]);const Cn={props:{card:Object},components:{customModal:U},created(){},data(){return{newMember:null,memberIds:JSON.parse(JSON.stringify(this.card.memberIds)),filterBy:""}},methods:{closeModal(){this.$emit("closeModal")},toggleMember(t,e){var n="";const l=this.memberIds.findIndex(o=>o===t);l===-1?(this.memberIds.push(t),n=`${e} joined this card`):(this.memberIds.splice(l,1),n=`${e} left this card`),this.save(n)},save(t){this.$emit("updateKey","memberIds",JSON.parse(JSON.stringify(this.memberIds)),t)}},computed:{members(){var t=this.$store.getters.currBoard.members;if(!this.filterBy)return t;const e=new RegExp(this.filterBy,"i");return t.filter(n=>e.test(n.fullname)||e.test(n.username))}},unmounted(){}},wn=k(" Members "),Bn=s("h4",null,"Board members",-1),$n={key:0,class:"members-container"},Sn=["onClick"],xn={class:"avatar-container"},Mn=["src"],In={key:1},Dn={class:"member-info"},Tn=s("span",{class:"v-icon"},null,-1),An={key:1,class:"msg-no-members"};function Un(t,e,n,l,o,r){const p=f("custom-modal"),d=N("focus");return i(),C(p,{onCloseModal:r.closeModal},{header:g(()=>[wn]),default:g(()=>[v(s("input",{"onUpdate:modelValue":e[0]||(e[0]=c=>o.filterBy=c),class:"custom-input",type:"text",placeholder:"Search members..."},null,512),[[d],[D,o.filterBy]]),Bn,r.members.length?(i(),a("ul",$n,[(i(!0),a($,null,B(r.members,c=>(i(),a("li",{key:c._id,onClick:_=>r.toggleMember(c._id,c.fullname)},[s("div",{class:b(["member",{active:o.memberIds.includes(c._id)}])},[s("div",xn,[c.imgUrl?(i(),a("img",{key:0,src:c.imgUrl,alt:""},null,8,Mn)):(i(),a("span",In,m(c.fullname.split(" ")[0].split("")[0]+c.fullname.split(" ")[1].split("")[0]),1))]),s("div",Dn,[s("span",null,m(c.fullname),1),s("span",null,"("+m(c.username)+")",1)]),Tn],2)],8,Sn))),128))])):(i(),a("p",An,"Looks like that person isn't a member yet. Enter their email address to add them to the card and board."))]),_:1},8,["onCloseModal"])}var $e=M(Cn,[["render",Un]]);const On={props:{card:Object},components:{customModal:U,Calendar:Ee,DatePicker:Ge},created(){},data(){return{date:new Date,time:null}},methods:{closeModal(){this.$emit("closeModal")},async setDate(){this.time||(this.time="00:00");const t={date:this.date,time:this.time,isCompleted:null};await this.$emit("updateKey","dueDate",JSON.parse(JSON.stringify(t)),`added a due date ${t.date.toDateString()} at ${t.time}`),this.closeModal()},async removeDate(){await this.$emit("updateKey","dueDate",JSON.parse(JSON.stringify(null)),"removed due date from card"),this.closeModal()}},computed:{readDate(){const t=this.date.getDate(),e=this.date.getMonth()+1,n=this.date.getFullYear(),l=t<10?"0"+t:t,o=e<10?"0"+e:e;return`${n}-${o}-${l}`}},unmounted(){}},Nn=k(" Dates "),Ln={class:"calendar-container"},Jn=s("h4",null,"Due date",-1),En={class:"date-options"},Gn=s("h4",null,"Reminders will be sent to all members and watchers of this card.",-1);function Pn(t,e,n,l,o,r){const p=f("DatePicker",!0),d=f("custom-modal");return i(),C(d,{class:"date-picker",onCloseModal:r.closeModal},{header:g(()=>[Nn]),default:g(()=>[s("div",Ln,[I(p,{modelValue:o.date,"onUpdate:modelValue":e[0]||(e[0]=c=>o.date=c)},null,8,["modelValue"])]),Jn,s("div",En,[v(s("input",{disabled:"",type:"date","onUpdate:modelValue":e[1]||(e[1]=c=>r.readDate=c),class:"custom-input"},null,512),[[D,r.readDate]]),v(s("input",{type:"time",class:"custom-input","onUpdate:modelValue":e[2]||(e[2]=c=>o.time=c)},null,512),[[D,o.time]])]),Gn,s("button",{onClick:e[3]||(e[3]=(...c)=>r.setDate&&r.setDate(...c)),class:"custom-btn save"},"Save"),s("button",{onClick:e[4]||(e[4]=(...c)=>r.removeDate&&r.removeDate(...c)),class:"custom-btn"},"Remove")]),_:1},8,["onCloseModal"])}var Se=M(On,[["render",Pn]]);const Vn={name:"",data(){return{checklist:{title:"Checklist",newTodo:"",todos:[]}}},methods:{closeModal(){this.$emit("closeModal")},save(){!this.checklist.title||(this.$emit("updateKey","checklists",JSON.parse(JSON.stringify(this.checklist)),`added checklist ${this.checklist.title}`),this.$emit("closeModal"))}},computed:{},components:{customModal:U}},Fn=k(" Add checklist "),jn=s("h4",null,"Title",-1);function Rn(t,e,n,l,o,r){const p=f("custom-modal"),d=N("focus");return i(),C(p,{onCloseModal:r.closeModal},{header:g(()=>[Fn]),default:g(()=>[jn,v(s("input",{"onUpdate:modelValue":e[0]||(e[0]=c=>o.checklist.title=c),class:"custom-input",type:"text"},null,512),[[D,o.checklist.title],[d]]),s("button",{class:"add-btn",onClick:e[1]||(e[1]=(...c)=>r.save&&r.save(...c))},"Add")]),_:1},8,["onCloseModal"])}var Hn=M(Vn,[["render",Rn]]);const K={getBgImages:qn,getStickers:zn,uploadImg:Qn,uploadVideo:Kn};function Qn(t){const e="Trellox_1",l="https://api.cloudinary.com/v1_1/trellox/image/upload",o=new FormData;return o.append("file",t.target.files[0]),o.append("upload_preset",e),fetch(l,{method:"POST",body:o}).then(r=>r.json()).then(r=>r).catch(r=>console.error(r))}function Kn(t){const e="Trellox_1",l="https://api.cloudinary.com/v1_1/trellox/video/upload",o=new FormData;return o.append("file",t),o.append("upload_preset",e),fetch(l,{method:"POST",body:o}).then(r=>r.json()).then(r=>r).catch(r=>console.error(r))}async function qn(t){try{return(await fetch(`https://api.unsplash.com/search?query=${t}&client_id=oMe4LiG85eXMR9Nf7b8cxU6jsTRHCtO81O_MjX-J4L0`,{method:"GET"})).json()}catch(e){console.log("cannot get images",e)}}async function zn(t){try{return(await fetch(`https://api.giphy.com/v1/stickers/search?api_key=rQgzccXSxZdfKDNtwJwPomi48MFP2ye1&limit=10&q=${t}`,{method:"GET"})).json()}catch(e){console.log("cannot get stickers",e)}}const Wn={props:{card:Object},name:"",data(){return{style:JSON.parse(JSON.stringify(this.card.style)),colors:this.$store.getters.coverColors,images:this.$store.getters.coverImages,searchPhotos:!1,searchVal:"",photos:null}},created(){this.searchImages("chill",!0)},methods:{closeModal(){this.$emit("closeModal")},async onUploadImg(t){console.log("ev",t),console.log("here");const e=await K.uploadImg(t),n={name:e.public_id,createdAt:e.created_at,url:e.url,format:e.format};this.$emit("updateKey","attachments",n,"added an attachment"),this.style.cover=e.url,this.style.type="url",this.save()},setColor(t){this.style.cover===t?(this.style.cover="",this.style.type=""):(this.style.cover=t,this.style.type="color"),this.save()},setBgUrl(t){this.style.cover===t?(this.style.cover="",this.style.type=""):(this.style.cover=t,this.style.type="url"),this.goBack(),this.save()},setCoverSize(t){this.style.fullCover=t,this.save()},save(){const t=this.style.cover?"updated card cover":"removed card cover";this.$emit("updateKey","style",JSON.parse(JSON.stringify(this.style)),t)},async searchImages(t,e=!1){e||(this.searchVal=t);const n=await K.getBgImages(t);this.photos=n.photos.results},goBack(){this.searchVal="",this.searchPhotos=!1},setDark(t){this.style.isDark=t,this.save()},removeCover(){this.style.cover="",this.style.type="",this.save()}},computed:{background(){return this.style.type==="url"?`background-image:url('${this.style.cover}')`:`background-color: ${this.style.cover}`}},components:{customModal:U}},Yn=k(" Cover "),Xn=s("h4",null,"Size",-1),Zn={class:"cover-preview-container"},ei=s("div",{class:"cover-bottom"},[s("div",{class:"wide"}),s("div",{class:"narrow"}),s("div",{class:"content-container"},[s("div",{class:"content"}),s("div",{class:"content"})]),s("div",{class:"member"})],-1),ti=[ei],si=s("div",{class:"full-content-container"},[s("div",{class:"wide"}),s("div",{class:"narrow"})],-1),oi=[si],ri={key:1,class:"text-color-container"},ni=s("h4",null,"Text color",-1),ii={class:"preview-container"},li=s("h4",null,"Colors",-1),ai={class:"colors-container"},di=["onClick"],ci=s("h4",null,"Attachments",-1),ui={class:"attachment-container"},pi=["onClick"],hi={for:"file-input",class:"custom-btn"},mi=k(" Upload a cover image "),gi=s("span",{class:"tip"},"Tip: Drag an image on to the card to upload it.",-1),_i=s("h4",{class:"images-header"},"Photos from Unsplash",-1),fi={class:"images-container"},yi=["onClick"],vi=k("Photo search"),bi={key:0},ki=s("h4",{style:{"margin-top":"16px","margin-bottom":"4px"}},"Results",-1),Ci={class:"large-image-container"},wi=["onClick"],Bi={key:1},$i=s("h4",null,"Suggested searches",-1),Si={class:"buttons-container"},xi=s("h4",{style:{"margin-top":"12px","margin-bottom":"4px"}},"Top photos",-1),Mi={key:0,class:"images-container"},Ii=["onClick"],Di=s("span",{class:"unsplash-txt"},[k("Photos from "),s("a",{target:"_blank",href:"https://unsplash.com/"},"Unsplash")],-1);function Ti(t,e,n,l,o,r){const p=f("custom-modal"),d=N("focus");return o.searchPhotos?(i(),C(p,{key:1,isFirstPage:!1,onGoBack:r.goBack,class:"image-picker",onCloseModal:r.closeModal},{header:g(()=>[vi]),default:g(()=>[v(s("input",{type:"text",onInput:e[7]||(e[7]=c=>r.searchImages(o.searchVal)),"onUpdate:modelValue":e[8]||(e[8]=c=>o.searchVal=c),class:"custom-input",placeholder:"Search Unsplash for photos"},null,544),[[d],[D,o.searchVal]]),o.searchVal?(i(),a("section",bi,[ki,s("div",Ci,[(i(!0),a($,null,B(o.photos,c=>(i(),a("div",{key:c,class:"large-preview",onClick:_=>r.setBgUrl(c.urls.full),style:S(`background-image: url('${c.urls.small}')`)},null,12,wi))),128))])])):(i(),a("section",Bi,[$i,s("div",Si,[s("button",{onClick:e[9]||(e[9]=y(c=>r.searchImages("Productivity"),["stop"])),class:"grey-btn"},"Productivity"),s("button",{onClick:e[10]||(e[10]=y(c=>r.searchImages("Perspective"),["stop"])),class:"grey-btn"},"Perspective"),s("button",{onClick:e[11]||(e[11]=y(c=>r.searchImages("Organization"),["stop"])),class:"grey-btn"},"Organization"),s("button",{onClick:e[12]||(e[12]=y(c=>r.searchImages("Colorful"),["stop"])),class:"grey-btn"},"Colorful"),s("button",{onClick:e[13]||(e[13]=y(c=>r.searchImages("Nature"),["stop"])),class:"grey-btn"},"Nature"),s("button",{onClick:e[14]||(e[14]=y(c=>r.searchImages("Business"),["stop"])),class:"grey-btn"},"Business"),s("button",{onClick:e[15]||(e[15]=y(c=>r.searchImages("Minimal"),["stop"])),class:"grey-btn"},"Minimal"),s("button",{onClick:e[16]||(e[16]=y(c=>r.searchImages("Space"),["stop"])),class:"grey-btn"},"Space"),s("button",{onClick:e[17]||(e[17]=y(c=>r.searchImages("Animals"),["stop"])),class:"grey-btn"},"Animals")]),xi,o.photos?(i(),a("div",Mi,[(i(!0),a($,null,B(o.photos,c=>(i(),a("div",{key:c,class:b(["attachment-preview",c.urls.full===o.style.cover?"active":""]),onClick:_=>r.setBgUrl(c.urls.full),style:S(`background-image: url('${c.urls.small}')`)},null,14,Ii))),128))])):h("",!0),Di]))]),_:1},8,["onGoBack","onCloseModal"])):(i(),C(p,{key:0,onCloseModal:r.closeModal,class:"cover-picker"},{header:g(()=>[Yn]),default:g(()=>[Xn,s("div",Zn,[s("div",{onClick:e[0]||(e[0]=c=>r.setCoverSize(!1)),class:b(["cover-preview",!o.style.fullCover&&o.style.cover?"active":""])},[s("div",{class:"cover-top",style:S(r.background)},ti,4)],2),s("div",{onClick:e[1]||(e[1]=c=>r.setCoverSize(!0)),class:b(["full-cover-preview",o.style.fullCover&&o.style.cover?"active":""])},[s("div",{class:"cover-top",style:S(r.background)},oi,4)],2)]),o.style.cover?(i(),a("button",{key:0,class:"custom-btn",onClick:e[2]||(e[2]=(...c)=>r.removeCover&&r.removeCover(...c))},"Remove cover")):h("",!0),o.style.type==="url"&&o.style.fullCover&&o.style.cover?(i(),a("section",ri,[ni,s("div",ii,[s("div",{class:b(["dark",o.style.isDark?"active":""]),onClick:e[3]||(e[3]=c=>r.setDark(!0)),style:S(`background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('${o.style.cover}');`)},m(n.card.title),7),s("div",{class:b(["light",o.style.isDark?"":"active"]),onClick:e[4]||(e[4]=c=>r.setDark(!1)),style:S(`background-image: linear-gradient(rgba(255, 255, 255, 0.5), rgba(255, 255, 255, 0.5)), url('${o.style.cover}');`)},m(n.card.title),7)])])):h("",!0),li,s("div",ai,[(i(!0),a($,null,B(o.colors,c=>(i(),a("div",{key:c,class:b(["color-preview",c===o.style.cover?"active":""]),style:S("background-color:"+c),onClick:_=>r.setColor(c)},null,14,di))),128))]),ci,s("div",ui,[(i(!0),a($,null,B(t.attachments,c=>(i(),a("div",{key:c,class:b(["attachment-preview",c.url===o.style.cover?"active":""]),onClick:_=>r.setBgUrl(c.url),style:S(`background-image: url('${c.url}')`)},null,14,pi))),128))]),s("label",hi,[mi,s("input",{type:"file",onInput:e[5]||(e[5]=(...c)=>r.onUploadImg&&r.onUploadImg(...c)),class:"file-input",hidden:"",id:"file-input"},null,32)]),gi,_i,s("div",fi,[(i(!0),a($,null,B(o.images,c=>(i(),a("div",{key:c,class:b(["attachment-preview",c===o.style.cover?"active":""]),onClick:_=>r.setBgUrl(c),style:S(`background-image: url('${c}')`)},null,14,yi))),128))]),s("button",{onClick:e[6]||(e[6]=c=>o.searchPhotos=!0),class:"custom-btn"},"Search for photos")]),_:1},8,["onCloseModal"]))}var xe=M(Wn,[["render",Ti]]);const Ai={data(){return{player:"",options:{controls:!0,autoplay:!1,fluid:!1,loop:!1,width:320,height:240,bigPlayButton:!1,controlBar:{volumePanel:!1},plugins:{record:{audio:!0,video:!0,debug:!0}}}}},mounted(){this.player=Y("#myVideo",this.options,()=>{var t="Using video.js "+Y.VERSION+" with videojs-record "+Y.getPluginVersion("record")+" and recordrtc "+Pe.version;Y.log(t)}),this.player.on("deviceReady",()=>{console.log("device is ready!")}),this.player.on("startRecord",()=>{console.log("started recording!")}),this.player.on("finishRecord",()=>{console.log("finished recording: ",this.player.recordedData),this.upload(this.player.recordedData)}),this.player.on("error",(t,e)=>{console.warn(e)}),this.player.on("deviceError",()=>{console.error("device error:",this.player.deviceErrorCode)})},methods:{async upload(t){var e=await K.uploadVideo(t);this.$emit("videoUrl",e)}},beforeDestroy(){this.player&&this.player.dispose()}},Ui={id:"myVideo",class:"video-js vjs-default-skin",playsinline:""};function Oi(t,e,n,l,o,r){return i(),a("video",Ui)}var Ni=M(Ai,[["render",Oi]]);const Li={components:{customModal:U,videoRecord:Ni},data(){return{recording:!1}},methods:{async onUploadImg(t){const e=await K.uploadImg(t),n={name:e.public_id,createdAt:e.created_at,url:e.url,format:e.format};this.$emit("updateKey","attachments",JSON.parse(JSON.stringify(n)))},videoUrl(t){const e={name:t.public_id,createdAt:t.created_at,url:t.url,format:"mp4"};this.$emit("updateKey","attachments",JSON.parse(JSON.stringify(e)))}}},Ji=k(" Attach from... "),Ei={class:"attachment-picker"},Gi=k("Computer "),Pi=s("label",null," Record video ",-1),Vi=[Pi],Fi={key:0,class:"video-rec"};function ji(t,e,n,l,o,r){const p=f("video-record"),d=f("custom-modal");return i(),C(d,{class:"attachment-container"},{header:g(()=>[Ji]),default:g(()=>[s("ul",Ei,[s("li",null,[s("label",null,[Gi,s("input",{type:"file",onChange:e[0]||(e[0]=(...c)=>r.onUploadImg&&r.onUploadImg(...c))},null,32)])]),s("li",{onClick:e[1]||(e[1]=c=>o.recording=!0)},Vi),o.recording?(i(),a("div",Fi,[I(p,{class:"video",onVideoUrl:r.videoUrl},null,8,["onVideoUrl"])])):h("",!0)])]),_:1})}var Ri=M(Li,[["render",ji]]);const Hi={data(){return{}},methods:{removeCard(){this.$emit("removeCard")},closeModal(){this.$emit("closeModal")}},computed:{},components:{customModal:U}},Qi=k(" Delete card? "),Ki=s("p",{style:{margin:"0 0 8px"}}," All actions will be removed from the activity feed and you won\u2019t be able to re-open the card. There is no undo. ",-1);function qi(t,e,n,l,o,r){const p=f("custom-modal");return i(),C(p,{onCloseModal:r.closeModal},{header:g(()=>[Qi]),default:g(()=>[Ki,s("button",{class:"delete-btn",style:{width:"100%","justify-content":"center"},onClick:e[0]||(e[0]=(...d)=>r.removeCard&&r.removeCard(...d))},"Delete")]),_:1},8,["onCloseModal"])}var Me=M(Hi,[["render",qi]]);const zi={props:{card:Object,isCopyCard:Boolean},data(){return{chosenBoard:this.$store.getters.currBoard,groupPos:0,cardPos:0,newTitle:JSON.parse(JSON.stringify(this.card.title)),currBoard:null}},methods:{closeModal(){this.$emit("closeModal")},async moveCard(){this.currBoard=JSON.parse(JSON.stringify(this.$store.getters.currBoard));const t=JSON.parse(JSON.stringify(this.chosenBoard));var e=JSON.parse(JSON.stringify(this.card));this.isCopyCard&&(e.title=this.newTitle,e.id=G.makeId()),t.groups[this.groupPos].cards.splice(this.cardPos,0,e),await this.$store.dispatch({type:"saveBoard",board:t}),await this.$store.dispatch({type:"setCurrBoard",boardId:this.currBoard._id}),this.isCopyCard||this.$emit("removeCard"),this.closeModal()}},computed:{boards(){return this.$store.getters.boards}},components:{customModal:U}},Wi={key:0},Yi=s("h4",null,"Title",-1),Xi={class:"move-card"},Zi={class:"board-info"},el=s("p",null,"Board",-1),tl=["value"],sl={class:"board-info"},ol=s("p",null,"Group",-1),rl=["value"],nl={class:"board-info"},il=s("p",null,"Position",-1),ll=["value"];function al(t,e,n,l,o,r){const p=f("custom-modal");return i(),C(p,{onCloseModal:r.closeModal},{header:g(()=>[k(m(n.isCopyCard?"Copy":"Move")+" card ",1)]),default:g(()=>[n.isCopyCard?(i(),a("div",Wi,[Yi,v(s("textarea",{type:"text","onUpdate:modelValue":e[0]||(e[0]=d=>o.newTitle=d),class:"custom-input"},null,512),[[D,o.newTitle]])])):h("",!0),s("h4",null,m(n.isCopyCard?"Copy to...":"Select destination"),1),s("div",Xi,[s("form",{onSubmit:e[5]||(e[5]=y((...d)=>r.moveCard&&r.moveCard(...d),["prevent"]))},[s("label",null,[s("div",Zi,[el,s("p",null,m(o.chosenBoard.title),1),v(s("select",{"onUpdate:modelValue":e[1]||(e[1]=d=>o.chosenBoard=d)},[(i(!0),a($,null,B(r.boards,d=>(i(),a("option",{key:d._id,value:d},m(d.title),9,tl))),128))],512),[[X,o.chosenBoard]])])]),s("label",null,[s("div",sl,[ol,s("p",null,m(o.chosenBoard.groups[o.groupPos].title),1),v(s("select",{"onUpdate:modelValue":e[2]||(e[2]=d=>o.groupPos=d)},[(i(!0),a($,null,B(o.chosenBoard.groups,(d,c)=>(i(),a("option",{key:d,value:c},m(d.title),9,rl))),128))],512),[[X,o.groupPos]])])]),s("label",null,[s("div",nl,[il,s("p",null,m(o.cardPos+1),1),o.chosenBoard.groups[o.groupPos].cards.length?v((i(),a("select",{key:0,"onUpdate:modelValue":e[3]||(e[3]=d=>o.cardPos=d)},[(i(!0),a($,null,B(o.chosenBoard.groups[o.groupPos].cards,(d,c)=>(i(),a("option",{key:d.id,value:c},m(c+1),9,ll))),128))],512)),[[X,o.cardPos]]):h("",!0)])]),s("button",{onClick:e[4]||(e[4]=(...d)=>r.moveCard&&r.moveCard(...d))},m(n.isCopyCard?"Copy":"Move"),1)],32)])]),_:1},8,["onCloseModal"])}var Ie=M(zi,[["render",al]]);const dl={props:{card:Object},data(){return{}},methods:{closeModal(){this.$emit("closeModal")}},computed:{cardLink(){return`https://trelloxx.herokuapp.com/#/board/${this.$route.params.boardId}/edit/${this.card.id}`}},components:{customModal:U}},cl=k("Share and more..."),ul=s("h4",null,[k("Link to this card "),s("span",{class:"members-icon"})],-1),pl={class:"share-btn-container"},hl=["href"],ml=s("i",{class:"fab fa-facebook-f"},null,-1),gl=k("Facebook"),_l=[ml,gl],fl=["href"],yl=s("i",{class:"fa fa-whatsapp","aria-hidden":"true"},null,-1),vl=k("Whatsapp"),bl=[yl,vl];function kl(t,e,n,l,o,r){const p=f("custom-modal"),d=N("focus");return i(),C(p,{onCloseModal:r.closeModal,class:"share-card"},{header:g(()=>[cl]),default:g(()=>[ul,v(s("input",{type:"text",autofocus:"","onUpdate:modelValue":e[0]||(e[0]=c=>r.cardLink=c),style:{resize:"none"},class:"custom-input"},null,512),[[d],[D,r.cardLink]]),s("div",pl,[s("a",{class:"facebook",href:`https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Ftrelloxx.herokuapp.com%2F%23%2Fboard%2F${this.$route.params.boardId}%2Fedit%2F${n.card.id}`,target:"_blank"},_l,8,hl),s("a",{class:"whatsapp",href:`whatsapp://send?text=https%3A%2F%2Ftrelloxx.herokuapp.com%2F%23%2Fboard%2F${this.$route.params.boardId}%2Fedit%2F${n.card.id}`,target:"_blank","data-action":"share/whatsapp/share"},bl,8,fl)])]),_:1},8,["onCloseModal"])}var Cl=M(dl,[["render",kl]]);const wl={name:"VideoPlayer",props:{options:{type:Object,default(){return{}}}},data(){return{player:null}},mounted(){this.player=Y(this.$refs.videoPlayer,this.options,function(){console.log("onPlayerReady",this)})},beforeDestroy(){this.player&&this.player.dispose()}},Bl={ref:"videoPlayer",class:"video-js"};function $l(t,e,n,l,o,r){return i(),a("div",null,[s("video",Bl,null,512)])}var De=M(wl,[["render",$l]]);const Sl={components:{labelPicker:Be,memberPicker:$e,checklistAdd:Hn,coverPicker:xe,attachments:Ri,confirmDelete:Me,datePicker:Se,moveCard:Ie,shareCard:Cl,videoPlayer:De},data(){var t;return{isTextArea:!1,card:null,lastCard:null,boardId:null,cardId:null,groupId:null,isShowActivity:!1,isCommentsInput:!1,newComment:{txt:"",createdAt:null,byMemberId:((t=this.$store.getters.loggedinUser)==null?void 0:t._id)||""},cmpName:null,description:null,isAddTodo:null,newTodo:{title:"",isDone:!1},coverColor:null,isCopyCard:!1,posTop:null,posLeft:null}},created(){this.cardId=this.$route.params.cardId,this.boardId=this.$route.params.boardId,this.loadCard()},methods:{openModal(t,e){this.calcPosition(e.target.getBoundingClientRect()),t==="copy-card"?(this.isCopyCard=!0,t="move-card"):this.isCopyCard=!1,this.cmpName=t},calcPosition(t){var{left:e}=t;const n=window.innerWidth;n-e<300&&(e=n-330),this.posTop=100,this.posLeft=e},closeModal(){this.cmpName=null},async updateTitle(){await this.addActivity("updated card title"),this.updateCard()},async updateKey(t,e,n){t==="checklists"||t==="attachments"?(e.id=G.makeId(),this.card[t].push(e)):this.card[t]=e,n&&await this.addActivity(n),await this.updateCard()},closeEdit(){this.$router.push(`/board/${this.boardId}`)},async loadCard(){var e;const t=await this.$store.dispatch({type:"getCardById",boardId:this.boardId,cardId:this.cardId});this.card=t.card,this.description=((e=t.card)==null?void 0:e.description)||"",this.groupId=t.groupId,this.checkCover()},showActivity(){this.isShowActivity=!this.isShowActivity},toggleCommentsInput(){this.isCommentsInput=!this.isCommentsInput},postComment(){if(!!this.newComment.txt){var t=JSON.parse(JSON.stringify(this.newComment));t.txt.trim(),t.createdAt=Date.now(),t.id=G.makeId(),this.card.comments.unshift(t),this.updateCard(),this.isCommentsInput=!1,this.newComment.txt=""}},async updateCard(){!this.card.title||(await this.$store.dispatch({type:"updateCard",groupId:this.groupId,card:this.card}),this.loadCard())},calcProgress(t){if(!t.length)return"0%";var n=(t.reduce((l,o)=>(o.isDone&&l++,l),0)*100/t.length).toFixed(0)+"%";return n},async toggleTodo(t,e){const n=this.card.checklists.findIndex(o=>o.id===e),l=this.card.checklists[n].todos.findIndex(o=>o.id===t);this.card.checklists[n].todos[l].isDone=!this.card.checklists[n].todos[l].isDone,this.card.checklists[n].todos[l].isDone?await this.addActivity(`marked ${this.card.checklists[n].todos[l].title} completed at checklist ${this.card.checklists[n].title}`):await this.addActivity(`unmarked ${this.card.checklists[n].todos[l].title} at checklist ${this.card.checklists[n].title}`),this.updateCard()},async updateDescription(){this.card.description=this.description,await this.addActivity(`added description to card ${this.card.title}`),this.updateCard(),this.isTextArea=!1},async addTodo(t,e){var n=JSON.parse(JSON.stringify(this.newTodo));if(n.title=JSON.parse(JSON.stringify(e.newTodo)),e.newTodo="",!n.title)return;n.id=G.makeId();const l=this.card.checklists.findIndex(o=>o.id===t);this.card.checklists[l].todos.push(n),await this.addActivity(`added ${n.title} to the checklist ${this.card.checklists[l].title}`),this.updateCard()},closeTodoInput(t){t.newTodo="",this.isAddTodo=null},openUrl(t){window.open(t)},async removeChecklist(t){await this.addActivity(`removed checklist ${this.card.checklists[t].title}`),this.card.checklists.splice(t,1),this.updateCard()},async checkCover(){if(!this.card.style.cover)return"";try{const t=new re;this.card.style.type==="url"&&(this.coverColor=await t.getColorAsync(this.card.style.cover))}catch(t){console.log(t)}},async removeCard(){this.addActivity(`removed card ${this.card.title}`),await this.$store.dispatch("removeCard",{groupId:this.groupId,cardId:this.cardId}),this.closeEdit()},async addActivity(t){await this.$store.dispatch({type:"addActivity",txt:t,card:this.card})},async joinToCard(){this.card.memberIds.push(this.$store.getters.loggedinUser._id),await this.addActivity(`${this.$store.getters.loggedinUser.fullname} Joined card`),this.updateCard()},formattedTime(t){return G.getFormattedTime(t)},videoOptions(t){return{autoplay:!1,controls:!0,sources:[{src:t,type:"video/mp4"},{src:t,type:"video/webm"}]}}},computed:{commentsInputStyle(){return this.isCommentsInput?"active-input":""},isCommentsText(){return this.newComment.txt?"save-btn":"not-allowed-btn"},labels(){var t=this.$store.getters.currBoard.labels;return t.filter(e=>this.card.labelIds.includes(e.id))},members(){var t=this.$store.getters.currBoard.members;return t.filter(e=>this.card.memberIds.includes(e._id))},comments(){var t=JSON.parse(JSON.stringify(this.$store.getters.users));return t.push(JSON.parse(JSON.stringify(this.$store.getters.currBoard.members))),JSON.parse(JSON.stringify(this.card)).comments.map(n=>{var l=t.find(o=>o._id===n.byMemberId);return n.byMember=l,n})},groupTitle(){return this.$store.getters.currBoard.groups.find(n=>n.id===this.groupId).title},cover(){return this.card.style.type==="url"?`background-image:url('${this.card.style.cover}')`:`background-color: ${this.card.style.cover}`},coverType(){return this.card.style.type==="url"?"card-cover-image":"card-cover-color"},coverButtonClass(){var t;return this.card.style.cover?this.card.style.type==="color"?this.card.style.cover==="#172B4D"?"on-cover-icon-dark":"on-cover-icon":(t=this.coverColor)!=null&&t.isDark?"on-cover-icon-dark":"on-cover-icon":""},formattedDate(){const t=new Date(this.card.dueDate.date),e=t.toLocaleString("en-US",{month:"short"}),n=t.getDate(),l=this.card.dueDate.time;return`${e} ${n} at ${l}`},activities(){const t=this.$store.getters.currBoard.activities;return t.length?t.filter(e=>e.card.id===this.card.id):[]},checkUser(){var t;return this.card.memberIds.includes((t=this.$store.getters.loggedinUser)==null?void 0:t._id)}}},xl={key:0,class:"card-edit"},Ml={class:"card-modal-details"},Il={class:"modal-header"},Dl=s("span",{class:"modal-header-icon"},null,-1),Tl={class:"modal-header-title"},Al={class:"inline-content"},Ul=k(" in list "),Ol={style:{"text-decoration":"underline"}},Nl={class:"modal-main-content"},Ll={class:"card-details"},Jl={key:0,class:"card-details-item"},El=s("h3",null,"Members",-1),Gl=["title"],Pl=["src"],Vl={key:1},Fl=s("i",{class:"fa-solid fa-plus"},null,-1),jl=[Fl],Rl={key:1,class:"card-details-item"},Hl=s("h3",null,"Labels",-1),Ql=["title"],Kl=s("i",{class:"fa-solid fa-plus"},null,-1),ql=[Kl],zl={key:2,class:"card-details-item card-date"},Wl=s("h3",null,"Due date",-1),Yl={key:0,class:"complete"},Xl=s("i",{class:"fa-solid fa-angle-down"},null,-1),Zl={class:"description-container"},ea=s("div",{class:"title"},[s("span",{class:"icon-description"}),s("h3",null,"Description")],-1),ta={class:"description-input"},sa=s("p",null,"Add a more detailed description\u2026",-1),oa=[sa],ra={key:2},na=s("i",{class:"fa-solid fa-xmark"},null,-1),ia=[na],la={key:0,class:"attachments-container"},aa=s("div",{class:"title"},[s("span",{class:"icon-attachment"}),s("h3",null,"Attachments")],-1),da={class:"attachment-info"},ca=["onClick"],ua={class:"title"},pa=s("span",{style:{top:"7px"},class:"icon-checklist"},null,-1),ha=["onClick"],ma={class:"checklist-progress"},ga={class:"progress-precent"},_a={class:"progress-bar"},fa=["onClick"],ya={class:"todo-title"},va={class:"add-todo-container"},ba=["onUpdate:modelValue","onKeydown","hidden"],ka=["onClick"],Ca=["onClick"],wa=["onClick"],Ba=s("i",{class:"fa-solid fa-xmark"},null,-1),$a=[Ba],Sa={class:"activity-container"},xa={class:"title"},Ma=s("span",{style:{top:"7px"},class:"icon-activity"},null,-1),Ia=s("h3",null,"Activity",-1),Da={class:"comments-frame"},Ta={class:"comments-input"},Aa={class:"avatar-container member"},Ua=["src"],Oa={key:1},Na={class:"card-comment"},La={class:"comment-by"},Ja={class:"comment-date"},Ea={class:"the-comment"},Ga={key:1},Pa={class:"avatar-container member"},Va=["src"],Fa={key:1},ja={class:"card-comment activities"},Ra={class:"comment-by"},Ha={class:"activity-txt"},Qa={class:"comment-date"},Ka={class:"modal-side-bar"},qa={key:0,class:"action-container"},za=s("h3",null,"Suggested",-1),Wa=s("span",{class:"icon ic-join"},null,-1),Ya=s("span",null,"Join",-1),Xa=[Wa,Ya],Za={class:"action-container"},ed=s("h3",null,"Add to card",-1),td=s("span",{class:"icon ic-join"},null,-1),sd=s("span",null,"Members",-1),od=[td,sd],rd=s("span",{class:"icon ic-label"},null,-1),nd=s("span",null,"Labels",-1),id=[rd,nd],ld=s("span",{class:"icon ic-checklist"},null,-1),ad=s("span",null,"Checklist",-1),dd=[ld,ad],cd=s("span",{class:"icon ic-date"},null,-1),ud=s("span",null,"Dates",-1),pd=[cd,ud],hd=s("span",{class:"icon ic-attachment"},null,-1),md=s("span",null,"Attachment",-1),gd=[hd,md],_d=s("span",{class:"icon ic-cover"},null,-1),fd=s("span",null,"Cover",-1),yd=[_d,fd],vd={class:"action-container"},bd=s("h3",null,"Actions",-1),kd=s("span",{class:"icon ic-move"},null,-1),Cd=s("span",null,"Move",-1),wd=[kd,Cd],Bd=s("span",{class:"icon ic-copy"},null,-1),$d=s("span",null,"Copy",-1),Sd=[Bd,$d],xd=Ve('<div class="action-btn"><span class="icon ic-template"></span><span class="template">Make template</span></div><div class="action-btn"><span class="icon ic-watch"></span><span>Watch</span></div><hr>',3),Md=s("span",{class:"icon ic-remove remove"},null,-1),Id=s("span",null,"Delete",-1),Dd=[Md,Id],Td=s("span",{class:"icon ic-share"},null,-1),Ad=s("span",null,"Share",-1),Ud=[Td,Ad];function Od(t,e,n,l,o,r){var _;const p=f("video-player"),d=N("focus"),c=N("click-outside");return o.card?(i(),a("section",xl,[s("div",{onMousedown:e[33]||(e[33]=(...u)=>r.closeEdit&&r.closeEdit(...u)),class:"window-overlay"},[s("div",{onMousedown:e[32]||(e[32]=y(()=>{},["stop"])),class:"card-modal"},[s("div",Ml,[o.card.style.cover?(i(),a("div",{key:0,style:S(r.cover),class:b(r.coverType)},null,6)):h("",!0),s("span",{onClick:e[0]||(e[0]=(...u)=>r.closeEdit&&r.closeEdit(...u)),class:b(["close-modal-button",r.coverButtonClass])},null,2),s("div",Il,[Dl,s("div",Tl,[v(s("textarea",{placeholder:"Enter card title","onUpdate:modelValue":e[1]||(e[1]=u=>o.card.title=u),onBlur:e[2]||(e[2]=(...u)=>r.updateTitle&&r.updateTitle(...u)),onKeydown:e[3]||(e[3]=P(y((...u)=>r.updateTitle&&r.updateTitle(...u),["prevent"]),["enter"])),dir:"auto","data-autosize":"true"},null,544),[[D,o.card.title]])]),s("div",Al,[Ul,s("span",Ol,m(r.groupTitle),1)])]),s("div",Nl,[s("div",Ll,[r.members.length?(i(),a("div",Jl,[El,(i(!0),a($,null,B(r.members,u=>(i(),a("div",{class:"avatar-container",key:u.id,title:u.fullname},[u.imgUrl?(i(),a("img",{key:0,src:u.imgUrl,alt:""},null,8,Pl)):(i(),a("span",Vl,m(u.fullname.split(" ")[0].split("")[0]+u.fullname.split(" ")[1].split("")[0]),1))],8,Gl))),128)),s("div",{class:"add-member",onClick:e[4]||(e[4]=u=>r.openModal("member-picker",u))},jl)])):h("",!0),r.labels.length?(i(),a("div",Rl,[Hl,s("div",null,[(i(!0),a($,null,B(r.labels,u=>(i(),a("span",{class:b(["label-span",u.className]),key:u.id,title:u.title},[s("span",{onClick:e[5]||(e[5]=O=>r.openModal("label-picker",O))},m(u.title),1)],10,Ql))),128)),s("div",{class:"add-label",onClick:e[6]||(e[6]=u=>r.openModal("label-picker",u))},ql)])])):h("",!0),(_=o.card.dueDate)!=null&&_.date?(i(),a("div",zl,[Wl,v(s("input",{onInput:e[7]||(e[7]=(...u)=>r.updateCard&&r.updateCard(...u)),"onUpdate:modelValue":e[8]||(e[8]=u=>o.card.dueDate.isCompleted=u),type:"checkbox",class:b({full:o.card.dueDate.isCompleted})},null,34),[[H,o.card.dueDate.isCompleted]]),s("span",{class:"date-info",onClick:e[9]||(e[9]=u=>r.openModal("date-picker",u))},[k(m(r.formattedDate),1),o.card.dueDate.isCompleted?(i(),a("span",Yl,"complete")):h("",!0),Xl])])):h("",!0)]),s("div",Zl,[ea,s("div",ta,[!o.isTextArea&&o.card.description.length?(i(),a("pre",{key:0,onClick:e[10]||(e[10]=u=>o.isTextArea=!0)},m(o.card.description),1)):h("",!0),!o.isTextArea&&!o.card.description?(i(),a("div",{key:1,class:"fake-text-area",onClick:e[11]||(e[11]=u=>o.isTextArea=!0)},oa)):h("",!0),o.isTextArea?v((i(),a("div",ra,[v(s("textarea",{"onUpdate:modelValue":e[12]||(e[12]=u=>o.description=u),placeholder:"Add a more detailed description\u2026"},null,512),[[d],[D,o.description]]),s("button",{onClick:e[13]||(e[13]=(...u)=>r.updateDescription&&r.updateDescription(...u)),class:"save-btn"},"Save"),s("span",{onClick:e[14]||(e[14]=u=>o.isTextArea=!1),class:"x-icon"},ia)])),[[c,()=>o.isTextArea=!1]]):h("",!0)])]),o.card.attachments.length?(i(),a("div",la,[aa,s("ul",null,[(i(!0),a($,null,B(o.card.attachments,u=>(i(),a("li",{key:u},[u.format==="mp4"?(i(),C(p,{key:0,options:r.videoOptions(u.url)},null,8,["options"])):(i(),a("div",{key:1,class:"attachment",style:S({"background-image":"url("+u.url+")"})},null,4)),s("div",da,[s("h5",null,[k(m(u.name)+"."+m(u.format)+" ",1),s("span",{onClick:O=>r.openUrl(u.url)},null,8,ca)]),s("p",null,"Added "+m(u.createdAt),1)])]))),128))])])):h("",!0),(i(!0),a($,null,B(o.card.checklists,(u,O)=>(i(),a("div",{key:u.id,class:"checklist-container"},[s("div",ua,[pa,s("h3",null,m(u.title),1),s("button",{onClick:w=>r.removeChecklist(O),class:"grey-btn"},"Delete",8,ha)]),s("div",ma,[s("span",ga,m(r.calcProgress(u.todos)),1),s("div",_a,[s("div",{style:S("width:"+r.calcProgress(u.todos)),class:b([r.calcProgress(u.todos)==="100%"?"progress-completed":"","current-progress"])},null,6)])]),s("div",null,[(i(!0),a($,null,B(u.todos,w=>(i(),a("div",{key:w.id,class:"checklist-todos-container"},[s("div",{onClick:R=>r.toggleTodo(w.id,u.id),class:b(["todo-checkbox",w.isDone?"completed":""])},[s("span",{class:b(w.isDone?"checked":"")},null,2)],10,fa),s("div",{class:b(["todo-title-container",w.isDone?"todo-completed":""])},[s("div",ya,m(w.title),1)],2)]))),128))]),v((i(),a("div",va,[o.isAddTodo===u.id?v((i(),a("textarea",{key:0,"onUpdate:modelValue":w=>u.newTodo=w,onKeydown:P(y(w=>r.addTodo(u.id,u),["prevent"]),["enter"]),placeholder:"Add an item",hidden:!o.isAddTodo},null,40,ba)),[[D,u.newTodo],[d]]):h("",!0),o.isAddTodo===u.id?(i(),a("button",{key:1,class:b(u.newTodo?"save-btn":"not-allowed-btn"),onClick:y(w=>r.addTodo(u.id,u),["stop"])},"Add",10,ka)):(i(),a("button",{key:2,class:"grey-btn",onClick:y(w=>o.isAddTodo=u.id,["stop"]),style:{margin:"unset"}},"Add an item",8,Ca)),o.isAddTodo===u.id&&u.newTodo?(i(),a("span",{key:3,onClick:w=>r.closeTodoInput(u),class:"x-icon"},$a,8,wa)):h("",!0)])),[[c,()=>o.isAddTodo=null]])]))),128)),s("div",Sa,[s("div",xa,[Ma,Ia,o.isShowActivity?(i(),a("button",{key:0,onClick:e[15]||(e[15]=(...u)=>r.showActivity&&r.showActivity(...u)),class:"grey-btn"},"Hide details")):(i(),a("button",{key:1,onClick:e[16]||(e[16]=(...u)=>r.showActivity&&r.showActivity(...u)),class:"grey-btn"},"Show details"))]),s("div",Da,[v((i(),a("div",Ta,[v(s("textarea",{onFocus:e[17]||(e[17]=u=>o.isCommentsInput=!0),class:b(r.commentsInputStyle),"onUpdate:modelValue":e[18]||(e[18]=u=>o.newComment.txt=u),onKeydown:e[19]||(e[19]=P(y((...u)=>r.postComment&&r.postComment(...u),["prevent"]),["enter"])),placeholder:"Write a comment..."},null,34),[[D,o.newComment.txt]]),o.isCommentsInput?(i(),a("button",{key:0,onClick:e[20]||(e[20]=y((...u)=>r.postComment&&r.postComment(...u),["stop"])),class:b(r.isCommentsText)},"Save",2)):h("",!0)])),[[c,()=>o.isCommentsInput=!1]])])]),s("div",null,[(i(!0),a($,null,B(r.comments,u=>{var O,w,R;return i(),a("div",{class:"card-comment-container",key:u.id},[s("div",Aa,[(O=u.byMember)!=null&&O.imgUrl?(i(),a("img",{key:0,src:u.byMember.imgUrl,alt:""},null,8,Ua)):(i(),a("span",Oa,m((w=u.byMember)!=null&&w._id?u.byMember.fullname.split(" ")[0].split("")[0]+u.byMember.fullname.split(" ")[1].split("")[0]:"G"),1))]),s("div",Na,[s("span",La,m(((R=u.byMember)==null?void 0:R.fullname)||"Guest"),1),s("span",Ja,m(r.formattedTime(u.createdAt)),1),s("div",Ea,[s("p",null,m(u.txt),1)])])])}),128))]),r.activities.length&&o.isShowActivity?(i(),a("div",Ga,[(i(!0),a($,null,B(r.activities,u=>{var O;return i(),a("div",{class:"card-comment-container",key:u.id},[s("div",Pa,[u.byMember.imgUrl?(i(),a("img",{key:0,src:u.byMember.imgUrl,alt:""},null,8,Va)):(i(),a("span",Fa,m((O=u.byMember)!=null&&O._id?u.byMember.fullname.split(" ")[0].split("")[0]+u.byMember.fullname.split(" ")[1].split("")[0]:"G"),1))]),s("div",ja,[s("div",null,[s("span",Ra,m(u.byMember.fullname),1),s("span",Ha,m(u.txt),1)]),s("span",Qa,m(r.formattedTime(u.createdAt)),1)])])}),128))])):h("",!0)]),s("div",Ka,[r.checkUser?h("",!0):(i(),a("div",qa,[za,s("div",{onClick:e[21]||(e[21]=(...u)=>r.joinToCard&&r.joinToCard(...u)),class:"action-btn"},Xa)])),s("div",Za,[ed,s("div",{class:"action-btn",onClick:e[22]||(e[22]=u=>r.openModal("member-picker",u))},od),s("div",{class:"action-btn",onClick:e[23]||(e[23]=u=>r.openModal("label-picker",u))},id),s("div",{class:"action-btn",onClick:e[24]||(e[24]=u=>r.openModal("checklist-add",u))},dd),s("div",{class:"action-btn",onClick:e[25]||(e[25]=u=>r.openModal("date-picker",u))},pd),s("div",{class:"action-btn",onClick:e[26]||(e[26]=u=>r.openModal("attachments",u))},gd),s("div",{class:"action-btn",onClick:e[27]||(e[27]=u=>r.openModal("cover-picker",u))},yd)]),s("div",vd,[bd,s("div",{class:"action-btn",onClick:e[28]||(e[28]=u=>r.openModal("move-card",u))},wd),s("div",{class:"action-btn",onClick:e[29]||(e[29]=u=>r.openModal("copy-card",u))},Sd),xd,s("div",{class:"action-btn remove",onClick:e[30]||(e[30]=u=>r.openModal("confirm-delete",u))},Dd),s("div",{class:"action-btn",onClick:e[31]||(e[31]=u=>r.openModal("share-card",u))},Ud),o.cmpName?v((i(),C(ae(o.cmpName),{key:0,card:o.card,posLeft:o.posLeft,isCopyCard:o.isCopyCard,onRemoveCard:r.removeCard,onCloseModal:r.closeModal,onUpdateKey:r.updateKey,style:S(`top: ${o.posTop}px; left: ${o.posLeft}px`)},null,8,["card","posLeft","isCopyCard","onRemoveCard","onCloseModal","onUpdateKey","style"])),[[c,()=>r.closeModal()]]):h("",!0)])])])],32)],32)])):h("",!0)}var Te=M(Sl,[["render",Od]]);const Nd={name:"",data(){return{}},methods:{openModal(t){this.$emit("openModal",t)}},computed:{},components:{}},Ld={class:"quick-edit-actions-container"},Jd=s("span",{class:"icon card"},null,-1),Ed=s("span",{class:"txt"},"Open card",-1),Gd=[Jd,Ed],Pd=s("span",{class:"icon label"},null,-1),Vd=s("span",{class:"txt"},"Edit labels",-1),Fd=[Pd,Vd],jd=s("span",{class:"icon member"},null,-1),Rd=s("span",{class:"txt"},"Change members",-1),Hd=[jd,Rd],Qd=s("span",{class:"icon cover"},null,-1),Kd=s("span",{class:"txt"},"Change cover",-1),qd=[Qd,Kd],zd=s("span",{class:"icon move"},null,-1),Wd=s("span",{class:"txt"},"Move",-1),Yd=[zd,Wd],Xd=s("span",{class:"icon copy"},null,-1),Zd=s("span",{class:"txt"},"Copy",-1),ec=[Xd,Zd],tc=s("span",{class:"icon date"},null,-1),sc=s("span",{class:"txt"},"Edit dates",-1),oc=[tc,sc],rc=s("span",{class:"icon remove"},null,-1),nc=s("span",{class:"txt"},"Delete",-1),ic=[rc,nc];function lc(t,e,n,l,o,r){return i(),a("section",Ld,[s("div",{onClick:e[0]||(e[0]=p=>t.$emit("openCard")),class:"action-button"},Gd),s("div",{onClick:e[1]||(e[1]=p=>r.openModal("label-picker")),class:"action-button"},Fd),s("div",{onClick:e[2]||(e[2]=p=>r.openModal("member-picker")),class:"action-button"},Hd),s("div",{onClick:e[3]||(e[3]=p=>r.openModal("cover-picker")),class:"action-button"},qd),s("div",{onClick:e[4]||(e[4]=p=>r.openModal("move-card")),class:"action-button"},Yd),s("div",{onClick:e[5]||(e[5]=p=>r.openModal("copy-card")),class:"action-button"},ec),s("div",{onClick:e[6]||(e[6]=p=>r.openModal("date-picker")),class:"action-button"},oc),s("div",{onClick:e[7]||(e[7]=p=>r.openModal("confirm-delete")),class:"action-button"},ic)])}var ac=M(Nd,[["render",lc]]);const dc={name:"card-preview",props:{cardToCopy:Object,isQuickEdit:Object,groupId:String},components:{cardEdit:Te,quickEditActions:ac,labelPicker:Be,memberPicker:$e,coverPicker:xe,datePicker:Se,confirmDelete:Me,moveCard:Ie,Container:ne,Draggable:ie,videoPlayer:De},data(){return{card:JSON.parse(JSON.stringify(this.cardToCopy)),activeColor:"red",isChecklistDone:!1,newTitle:"",cmpName:null,isCopyCard:!1,posTop:null,posLeft:null,isDragOver:!1,lastCard:null}},methods:{openCard(){this.$emit("closeQuickEdit")},openCardEdit(){if(this.isQuickEdit.boolean)return;const t=this.$router.currentRoute._value.fullPath;this.$router.push(`${t}/edit/${this.card.id}`)},toggleLabelTitle(){this.$store.commit({type:"toggleLabelTitle"})},calcProgress(){const t=this.card.checklists.reduce((e,n)=>{const l=n.todos.reduce((o,r)=>(r.isDone&&o++,o),0);return e.todosCount+=n.todos.length,e.doneTodos+=l,e},{todosCount:0,doneTodos:0});return t.todosCount===t.doneTodos?this.isChecklistDone=!0:this.isChecklistDone=!1,`${t.doneTodos}/${t.todosCount}`},openQuickEdit(t){this.calcPosition(t.target.getBoundingClientRect()),this.newTitle=JSON.parse(JSON.stringify(this.card.title)),this.$emit("openQuickEdit",this.card.id)},async updateTitle(){try{if(!this.newTitle)return;const t=JSON.parse(JSON.stringify(this.card));this.lastCard=JSON.parse(JSON.stringify(this.card)),t.title=this.newTitle,this.card=t,await this.addActivity("updated this card title"),this.$store.dispatch({type:"updateCard",groupId:this.groupId,card:t}),this.$emit("closeQuickEdit")}catch(t){throw console.log("err",t),this.card=this.lastCard,t}},openModal(t){t==="copy-card"?(this.isCopyCard=!0,t="move-card"):this.isCopyCard=!1,this.cmpName=t},calcPosition(t){var{left:e,top:n}=t;const l=screen.width,o=window.innerHeight;n+320>o&&(n=o-320),e-=217,e+420>l&&(e=l-420),this.posTop=n,this.posLeft=e},closeModal(){this.cmpName=null},async updateKey(t,e,n){try{const l=JSON.parse(JSON.stringify(this.card));this.lastCard=JSON.parse(JSON.stringify(this.card)),t==="checklists"?(e.id=utilService.makeId(),l[t].push(e)):l[t]=e,this.card=l,n&&await this.addActivity(n),this.$store.dispatch({type:"updateCard",groupId:this.groupId,card:l})}catch(l){throw console.log("err",l),this.card=this.lastCard,l}},async removeCard(){await this.addActivity(`removed card ${this.card.title}`),await this.$store.dispatch("removeCard",{groupId:this.groupId,cardId:this.card.id}),this.$emit("closeQuickEdit")},async completeDate(){var t;try{const e=JSON.parse(JSON.stringify(this.card));this.lastCard=JSON.parse(JSON.stringify(this.card)),e.dueDate.isCompleted=!e.dueDate.isCompleted,this.card=e,(t=e.dueDate)!=null&&t.isCompleted?await this.addActivity("marked the due date complete"):await this.addActivity("marked the due date incomplete"),this.$store.dispatch({type:"updateCard",groupId:this.groupId,card:e})}catch(e){throw console.log("err",e),this.card=this.lastCard,e}},async addActivity(t){await this.$store.dispatch({type:"addActivity",txt:t,card:this.card})},async onMemberDrop(t){try{const e=JSON.parse(JSON.stringify(this.card));if(this.lastCard=JSON.parse(JSON.stringify(this.card)),t.addedIndex!==null&&!e.memberIds.includes(t.payload._id))e.memberIds.unshift(t.payload._id),this.card=e,await this.$store.dispatch({type:"updateCard",groupId:this.groupId,card:e});else if(t.removedIndex!==null){const n=e.memberIds.findIndex(l=>l===t.payload._id);e.memberIds.splice(n,1),this.card=e,await this.$store.dispatch({type:"updateCard",groupId:this.groupId,card:e})}this.$store.commit({type:"memberDrag",isDrag:!1})}catch(e){throw console.log("err",e),this.card=this.lastCard,e}},getChildPayload(t){return this.members[t]},onStickerDrop(t){try{const e=t.payload.images.original_still.url,n=JSON.parse(JSON.stringify(this.card));this.lastCard=JSON.parse(JSON.stringify(this.card)),t.addedIndex!==null&&(n.stickers||(n.stickers=[]),n.stickers.push(e),this.card=n,this.$store.dispatch({type:"updateCard",groupId:this.groupId,card:n})),this.$store.commit({type:"stickerDrag",isDrag:!1})}catch(e){throw console.log("err",e),this.card=this.lastCard,e}},removeSticker(t){const e=JSON.parse(JSON.stringify(this.card));e.stickers.splice(t,1),this.card=e,this.$store.dispatch({type:"updateCard",groupId:this.groupId,card:e})},stopDrag(t){this.checkQuickEdit&&t.stopPropagation()},videoOptions(t){return{autoplay:!1,controls:!0,sources:[{src:t,type:"video/mp4"},{src:t,type:"video/webm"}]}}},computed:{labels(){var t=this.$store.getters.currBoard.labels;return t=t.filter(({className:e})=>e!=="color10"),t.filter(e=>this.card.labelIds.includes(e.id))},labelTitleShown(){return this.$store.getters.labelTitleShown?"open":""},doneChecklist(){return this.isChecklistDone?"completed":""},computedQuickEdit(){return this.isQuickEdit.boolean&&this.isQuickEdit.cardId===this.card.id?"quick-card-editor-open":""},checkQuickEdit(){return this.isQuickEdit.boolean&&this.isQuickEdit.cardId===this.card.id},members(){var t=this.$store.getters.currBoard.members;return t.filter(e=>this.card.memberIds.includes(e._id))},formattedDate(){var l;const t=new Date((l=this.card.dueDate)==null?void 0:l.date),e=t.toLocaleString("en-US",{month:"short"}),n=t.getDate();return`${e} ${n}`},checkUser(){var t;return this.card.memberIds.includes((t=this.$store.getters.loggedinUser)==null?void 0:t._id)},computedStyle(){var t=this.card.style.fullCover&&this.card.style.type==="url"||this.computedQuickEdit?"overflow-y: unset":"";return t+=";",t+=this.checkQuickEdit?`top: ${this.posTop}px; left: ${this.posLeft}px;`:"",t}},watch:{cardToCopy:{handler(){this.card=this.cardToCopy},deep:!0}}},cc=["onClick"],uc=["src"],pc=s("div",{class:"card-preview-cover-color"},null,-1),hc={key:2,class:"card-preview-inside-container"},mc={key:0,class:"card-preview-cover"},gc=["src"],_c=["src"],fc=["title"],yc={key:0},vc={key:3},bc={key:5,class:"card-preview-title"},kc={class:"card-icons-container"},Cc={key:0,title:"watch",class:"icon-div"},wc=s("span",{class:"eyecon"},null,-1),Bc=[wc],$c={key:0,class:"date-complete-icon"},Sc={key:1,class:"date-icon"},xc={class:"date"},Mc={key:2,title:"description",class:"icon-div"},Ic=s("span",{class:"desc"},null,-1),Dc=[Ic],Tc={key:3,title:"comments",class:"icon-div"},Ac=s("span",{class:"comment"},null,-1),Uc={class:"txt"},Oc={key:4,title:"attachments",class:"icon-div"},Nc=s("span",{class:"attachment"},null,-1),Lc={class:"txt"},Jc=s("span",{class:"check"},null,-1),Ec={class:"txt"},Gc=["src"],Pc={key:1};function Vc(t,e,n,l,o,r){var w,R,Z;const p=f("Container"),d=f("video-player"),c=f("Draggable"),_=f("quick-edit-actions"),u=N("focus"),O=N("click-outside");return i(),a("section",null,[s("div",{onClick:e[13]||(e[13]=y((...x)=>r.openCardEdit&&r.openCardEdit(...x),["stop"])),onMousedown:e[14]||(e[14]=x=>r.stopDrag(x)),class:b(["card-preview",r.computedQuickEdit]),style:S(r.computedStyle),onMouseover:e[15]||(e[15]=x=>o.isDragOver=!0),onMouseleave:e[16]||(e[16]=x=>o.isDragOver=!1)},[((w=o.card.stickers)==null?void 0:w.length)||this.$store.getters.isStickerDrag&&o.isDragOver?(i(),C(p,{key:0,orientation:"horizontal","group-name":"5",onDrop:e[0]||(e[0]=x=>r.onStickerDrop(x)),class:b((R=o.card.stickers)!=null&&R.length?"sticker-container":"sticker-container-closed")},{default:g(()=>[(i(!0),a($,null,B(o.card.stickers,(x,q)=>(i(),a("div",{class:"sticker",key:x,onClick:y(ee=>r.removeSticker(q),["stop"])},[s("img",{src:x,alt:""},null,8,uc)],8,cc))),128))]),_:1},8,["class"])):h("",!0),o.card.style.fullCover&&!r.checkQuickEdit?(i(),a("div",{key:1,style:S(o.card.style.type==="color"?`background: ${o.card.style.cover}`:`background-image: url('${o.card.style.cover}')`),class:b(["card-preview-full-cover",o.card.style.type==="color"?"":"imgUrl"])},[pc,s("div",{class:b(["full-cover-title",o.card.style.isDark?"dark":"light"])},[s("span",null,m(o.card.title),1)],2),s("span",{onClick:e[1]||(e[1]=y((...x)=>r.openQuickEdit&&r.openQuickEdit(...x),["stop"])),class:"edit-card"})],6)):(i(),a("div",hc,[o.card.style.cover?(i(),a("div",mc,[o.card.style.type==="url"?(i(),a("img",{key:0,class:"card-image",src:o.card.style.cover},null,8,gc)):(i(),a("div",{key:1,class:"card-preview-cover-color",style:S(`background-color: ${o.card.style.cover};`)},null,4))])):h("",!0),o.card.attachments.length&&!o.card.style.cover&&o.card.attachments[0].format!=="mp4"?(i(),a("img",{key:1,class:"card-image",src:o.card.attachments[0].url},null,8,_c)):h("",!0),o.card.attachments.length&&!o.card.style.cover&&o.card.attachments[0].format=="mp4"?(i(),C(d,{key:2,onClick:e[2]||(e[2]=y(()=>{},["stop"])),class:"card-video",options:r.videoOptions(o.card.attachments[0].url)},null,8,["options"])):h("",!0),s("div",{style:S(o.card.style.type==="url"&&!o.card.style.fullCover||o.card.attachments.length&&!o.card.style.cover&&!o.card.style.fullCover?"margin-top: unset":""),class:"card-label-container"},[(i(!0),a($,null,B(r.labels,x=>(i(),a("span",{key:x.id,onClick:e[3]||(e[3]=y((...q)=>r.toggleLabelTitle&&r.toggleLabelTitle(...q),["stop"])),class:b([[x.className,r.labelTitleShown],"card-label"]),title:x.title},[r.labelTitleShown?(i(),a("span",yc,m(x.title),1)):h("",!0)],10,fc))),128))],4),r.checkQuickEdit&&r.labels.length?(i(),a("br",vc)):h("",!0),s("span",{onClick:e[4]||(e[4]=y(x=>r.openQuickEdit(x),["stop"])),class:"edit-card"}),r.checkQuickEdit?v((i(),a("textarea",{key:4,style:S(r.labels.length?"transform: translateY(-9px)":"transform: translateY(3px);"),"onUpdate:modelValue":e[5]||(e[5]=x=>o.newTitle=x),onFocus:e[6]||(e[6]=x=>x.target.select()),onKeydown:e[7]||(e[7]=P(y((...x)=>r.updateTitle&&r.updateTitle(...x),["prevent"]),["enter"]))},null,36)),[[D,o.newTitle],[u]]):(i(),a("span",bc,m(o.card.title),1)),s("div",kc,[s("div",null,[r.checkUser?(i(),a("div",Cc,Bc)):h("",!0),o.card.dueDate?(i(),a("div",{key:1,class:b([{complete:(Z=o.card.dueDate)==null?void 0:Z.isCompleted},"icon-div date-preview"]),title:"date",onClick:e[8]||(e[8]=y((...x)=>r.completeDate&&r.completeDate(...x),["stop"]))},[o.card.dueDate.isCompleted?(i(),a("span",$c)):(i(),a("span",Sc)),s("span",xc,m(r.formattedDate),1)],2)):h("",!0),o.card.description?(i(),a("div",Mc,Dc)):h("",!0),o.card.comments.length?(i(),a("div",Tc,[Ac,s("span",Uc,m(o.card.comments.length),1)])):h("",!0),o.card.attachments.length?(i(),a("div",Oc,[Nc,s("span",Lc,m(o.card.attachments.length),1)])):h("",!0),o.card.checklists.length?(i(),a("div",{key:5,title:"Checklist items",class:b(["icon-div",r.doneChecklist])},[Jc,s("span",Ec,m(r.calcProgress()),1)],2)):h("",!0),r.members.length||this.$store.getters.isMemberDrag&&o.isDragOver?(i(),C(p,{key:6,style:{float:"right"},"group-name":"3",orientation:"horizontal","get-child-payload":r.getChildPayload,onDrop:e[10]||(e[10]=x=>r.onMemberDrop(x))},{default:g(()=>[(i(!0),a($,null,B(r.members,x=>(i(),C(c,{style:{height:"28px"},class:"avatar-container",onMousedown:e[9]||(e[9]=q=>this.$store.commit({type:"memberDrag",isDrag:!0})),key:x.id,title:x.fullname},{default:g(()=>[x.imgUrl?(i(),a("img",{key:0,src:x.imgUrl,alt:""},null,8,Gc)):(i(),a("span",Pc,m(x.fullname.split(" ")[0].split("")[0]+x.fullname.split(" ")[1].split("")[0]),1))]),_:2},1032,["title"]))),128))]),_:1},8,["get-child-payload"])):h("",!0)])]),r.checkQuickEdit?(i(),a("button",{key:6,class:"save-quick-edit",onClick:e[11]||(e[11]=y((...x)=>r.updateTitle&&r.updateTitle(...x),["stop"]))},"Save")):h("",!0),I(_,{onMousedown:e[12]||(e[12]=y(()=>{},["stop"])),onOpenCard:r.openCard,onOpenModal:r.openModal,hidden:!r.checkQuickEdit,class:b(r.checkQuickEdit?"fade-in":"")},null,8,["onOpenCard","onOpenModal","hidden","class"]),o.cmpName&&r.checkQuickEdit?v((i(),C(ae(o.cmpName),{key:7,isCopyCard:o.isCopyCard,card:o.card,onRemoveCard:r.removeCard,onCloseModal:r.closeModal,onUpdateKey:r.updateKey},null,8,["isCopyCard","card","onRemoveCard","onCloseModal","onUpdateKey"])),[[O,()=>r.closeModal()]]):h("",!0)]))],38)])}var Fc=M(dc,[["render",Vc]]);const jc={name:"group-actions",props:{isSort:Boolean},data(){return{groupTitle:"",openCopyGroup:!1,openMoveGroup:!1,openMoveCards:!1,openSortCards:!1,currentGroups:this.$store.getters.currBoard.groups,chosenBoard:this.$store.getters.currBoard,groupPos:null}},methods:{addCard(){this.$emit("addCard")},removeGroup(){this.$emit("removeGroup")},copyGroup(){this.$emit("copyGroup",this.groupTitle),this.groupTitle=""},moveGroup(){const t=this.boards.find(e=>e._id===this.chosenBoard._id);this.$emit("moveGroup",t,this.groupPos)},moveAllCards(t){this.$emit("moveAllCards",t)},removeCards(){this.$emit("removeCards")},closeGrpAct(){this.$emit("closeGrpAct")},sortBy(t){this.$emit("sortBy",t)}},computed:{boards(){return this.$store.getters.boards}},components:{}},Rc={class:"group-actions"},Hc={class:"grp-act-header"},Qc=s("p",null,"List actions",-1),Kc=s("i",{class:"fa-solid fa-xmark"},null,-1),qc=[Kc],zc={key:0},Wc=s("a",null,"Add card...",-1),Yc=[Wc],Xc=s("a",null,"Copy list...",-1),Zc=[Xc],eu=s("a",null,"Move list...",-1),tu=[eu],su={key:0},ou=s("a",null,"Sort By...",-1),ru=[ou],nu=s("hr",null,null,-1),iu=s("a",null,"Move all cards in this list...",-1),lu=[iu],au=s("a",null,"Remove all cards in this list...",-1),du=[au],cu=s("hr",null,null,-1),uu=s("a",null,"Remove this list",-1),pu=[uu],hu={key:1,class:"copy-group"},mu={key:2,class:"move-group"},gu={class:"board-info"},_u=s("p",null,"Board",-1),fu=["value"],yu={class:"board-info"},vu=s("p",null,"Position",-1),bu=["value"],ku=s("button",null,"Save",-1),Cu={key:3},wu=["onClick"],Bu={key:4},$u={class:"sort"};function Su(t,e,n,l,o,r){const p=N("focus");return i(),a("section",Rc,[s("div",Hc,[Qc,s("span",{onClick:e[0]||(e[0]=(...d)=>r.closeGrpAct&&r.closeGrpAct(...d))},qc)]),!o.openCopyGroup&&!o.openMoveGroup&&!o.openMoveCards&&!o.openSortCards?(i(),a("div",zc,[s("ul",null,[s("li",{onClick:e[1]||(e[1]=(...d)=>r.addCard&&r.addCard(...d))},Yc),s("li",{onClick:e[2]||(e[2]=y(d=>o.openCopyGroup=!0,["stop"]))},Zc),s("li",{onClick:e[3]||(e[3]=y(d=>o.openMoveGroup=!0,["stop"]))},tu)]),s("ul",null,[n.isSort?(i(),a("hr",su)):h("",!0),n.isSort?(i(),a("li",{key:1,onClick:e[4]||(e[4]=y(d=>o.openSortCards=!0,["stop"]))},ru)):h("",!0),nu]),s("ul",null,[s("li",{onClick:e[5]||(e[5]=y(d=>o.openMoveCards=!0,["stop"]))},lu),s("li",{onClick:e[6]||(e[6]=(...d)=>r.removeCards&&r.removeCards(...d))},du)]),s("ul",null,[cu,s("li",{onClick:e[7]||(e[7]=(...d)=>r.removeGroup&&r.removeGroup(...d))},pu)])])):h("",!0),o.openCopyGroup?(i(),a("div",hu,[v(s("input",{"onUpdate:modelValue":e[8]||(e[8]=d=>o.groupTitle=d),type:"text",placeholder:"Enter list title"},null,512),[[p],[D,o.groupTitle]]),s("button",{onClick:e[9]||(e[9]=(...d)=>r.copyGroup&&r.copyGroup(...d))},"Create list")])):h("",!0),o.openMoveGroup?(i(),a("div",mu,[s("form",{onSubmit:e[12]||(e[12]=y((...d)=>r.moveGroup&&r.moveGroup(...d),["prevent"]))},[s("label",null,[s("div",gu,[_u,s("p",null,m(o.chosenBoard.title),1),v(s("select",{"onUpdate:modelValue":e[10]||(e[10]=d=>o.chosenBoard=d)},[(i(!0),a($,null,B(r.boards,d=>(i(),a("option",{key:d._id,value:d},m(d.title),9,fu))),128))],512),[[X,o.chosenBoard]])])]),s("label",null,[s("div",yu,[vu,s("p",null,m(o.groupPos+1),1),v(s("select",{"onUpdate:modelValue":e[11]||(e[11]=d=>o.groupPos=d)},[(i(!0),a($,null,B(o.chosenBoard.groups,(d,c)=>(i(),a("option",{key:d,value:c},m(c+1),9,bu))),128))],512),[[X,o.groupPos]])])]),ku],32)])):h("",!0),o.openMoveCards?(i(),a("div",Cu,[s("ul",null,[(i(!0),a($,null,B(o.currentGroups,d=>(i(),a("li",{onClick:c=>r.moveAllCards(d),key:d.id},m(d.title),9,wu))),128))])])):h("",!0),o.openSortCards?(i(),a("div",Bu,[s("ul",$u,[s("li",{onClick:e[13]||(e[13]=d=>r.sortBy("createdNew"))},"Date created (newest first)"),s("li",{onClick:e[14]||(e[14]=d=>r.sortBy("createdOld"))},"Date created (oldest first)"),s("li",{onClick:e[15]||(e[15]=d=>r.sortBy("name"))},"Card name (alphabetically)"),s("li",{onClick:e[16]||(e[16]=d=>r.sortBy("dueDate"))},"Due date")])])):h("",!0)])}var xu=M(jc,[["render",Su]]);const Ae=(t,e)=>{const{removedIndex:n,addedIndex:l,payload:o}=e;if(n===null&&l===null)return t;const r=[...t];let p=o;return n!==null&&(p=r.splice(n,1)[0]),l!==null&&r.splice(l,0,p),r};const Mu={name:"group",props:{group:Object},components:{cardPreview:Fc,groupActions:xu,Container:ne,Draggable:ie},created(){},data(){return{isAddCard:!1,groupTitle:JSON.parse(JSON.stringify(this.group.title)),cardTitle:"",editTitle:!1,openGrpAct:!1,isQuickEdit:{boolean:!1,cardId:""},posLeft:null}},methods:{toggleGroupActions(t){this.openGrpAct=!this.openGrpAct,this.calcPosition(t.target.getBoundingClientRect())},addCard(){!this.cardTitle||(this.$store.dispatch({type:"addCard",groupId:this.group.id,title:this.cardTitle}),this.cardTitle="")},actionAdd(){this.isAddCard=!0,this.openGrpAct=!1},removeGroup(){this.$store.dispatch({type:"removeGroup",groupId:this.group.id}),this.openGrpAct=!1},removeCard(t){this.$store.dispatch({type:"removeCard",groupId:this.group.id,cardId:t})},onCardDrop(t,e){const n=Object.assign({},JSON.parse(JSON.stringify(t)));n.cards=Ae(n.cards,e),this.$emit("onCardDrop",{cards:n.cards,groupId:n.id})},copyGroup(t){this.openGrpAct=!1;const e=this.board.groups.findIndex(l=>l.id===this.group.id),n=JSON.parse(JSON.stringify(this.group));n.title=t,n.id=G.makeId,this.board.groups.splice(e+1,0,n),this.$store.dispatch({type:"saveBoard",board:this.board})},async moveGroup(t,e){this.openGrpAct=!1,t.groups.splice(e,0,JSON.parse(JSON.stringify(this.group))),await this.$store.dispatch({type:"saveBoard",board:t});const n=this.board.groups.findIndex(l=>l.id===this.group.id);this.board.groups.splice(n,1),this.$store.dispatch({type:"saveBoard",board:this.board})},moveAllCards(t){this.openGrpAct=!1;const e=JSON.parse(JSON.stringify(this.group)),n=JSON.parse(JSON.stringify(this.group.cards));t.cards.push(...n),e.cards=[];const l=this.board.groups.findIndex(r=>r.id===e.id);this.board.groups.splice(l,1,e);const o=this.board.groups.findIndex(r=>r.id===t.id);this.board.groups.splice(o,1,t),this.$store.dispatch({type:"saveBoard",board:this.board})},removeCards(){const t=JSON.parse(JSON.stringify(this.group));t.cards=[];const e=this.board.groups.findIndex(n=>n.id===this.group.id);this.board.groups[e]=t,this.$store.dispatch({type:"saveBoard",board:this.board})},closeQuickEdit(){this.isQuickEdit.boolean=!1,this.isQuickEdit.cardId=""},openQuickEdit(t){this.isQuickEdit.boolean=!0,this.isQuickEdit.cardId=t},getChildPayload(t){return this.group.cards[t]},changeGrpTitle(){const t=JSON.parse(JSON.stringify(this.group));t.title=this.groupTitle;const e=this.board.groups.findIndex(n=>n.id===this.group.id);this.board.groups.splice(e,1,t),this.$store.dispatch({type:"saveBoard",board:this.board}),this.editTitle=!1},sortCards(t){this.openGrpAct=!1;var e={type:"sort",groupId:this.group.id,sortBy:t};this.$store.dispatch({type:"filterBoard",boardId:this.board._id,filterBy:e})},calcPosition(t){}},computed:{board(){return this.$store.getters.currBoard},computedQuickEdit(){return this.isQuickEdit.boolean?"quick-card-editor":""}}},Ue=t=>(de("data-v-02c0c59c"),t=t(),ce(),t),Iu={class:"group-preview"},Du={class:"group-header-container"},Tu={key:0,class:"add-card-container"},Au={class:"add-card-actions"},Uu=Ue(()=>s("i",{class:"fa-solid fa-xmark"},null,-1)),Ou=[Uu],Nu=Ue(()=>s("div",{class:"add-card-btn"},[s("i",{class:"fa-solid fa-plus"}),s("span",null,"Add a card")],-1)),Lu=[Nu];function Ju(t,e,n,l,o,r){const p=f("group-actions"),d=f("card-preview"),c=f("Draggable"),_=f("Container"),u=N("click-outside"),O=N("focus");return i(),a("section",Iu,[s("div",null,[s("div",Du,[o.editTitle?h("",!0):(i(),a("p",{key:0,class:"group-title",onClick:e[0]||(e[0]=w=>o.editTitle=!0)},m(n.group.title),1)),o.editTitle?v((i(),a("input",{key:1,onKeyup:e[1]||(e[1]=P((...w)=>r.changeGrpTitle&&r.changeGrpTitle(...w),["enter"])),onFocus:e[2]||(e[2]=w=>w.target.select()),"onUpdate:modelValue":e[3]||(e[3]=w=>o.groupTitle=w)},null,544)),[[u,r.changeGrpTitle],[O],[D,o.groupTitle]]):h("",!0),s("span",{class:"act-btn",onClick:e[4]||(e[4]=w=>r.toggleGroupActions(w))}),o.openGrpAct?v((i(),C(p,{key:2,isSort:n.group.cards.length>1,onCloseGrpAct:e[5]||(e[5]=w=>o.openGrpAct=!1),onRemoveCards:r.removeCards,onMoveAllCards:r.moveAllCards,onMoveGroup:r.moveGroup,onCopyGroup:r.copyGroup,onRemoveGroup:r.removeGroup,onAddCard:r.actionAdd,onSortBy:r.sortCards,style:S(`left: ${o.posLeft}px`)},null,8,["isSort","onRemoveCards","onMoveAllCards","onMoveGroup","onCopyGroup","onRemoveGroup","onAddCard","onSortBy","style"])),[[u,()=>o.openGrpAct=!1]]):h("",!0)]),I(_,{"drag-class":"on-dragging",class:"card-preview-container",onDrop:e[11]||(e[11]=w=>r.onCardDrop(n.group,w)),"group-name":"1","get-child-payload":r.getChildPayload},{default:g(()=>[(i(!0),a($,null,B(n.group.cards,w=>(i(),C(c,{key:w.id},{default:g(()=>[w.isShown?(i(),C(d,{key:0,onOpenQuickEdit:r.openQuickEdit,onCloseQuickEdit:r.closeQuickEdit,groupId:n.group.id,isQuickEdit:o.isQuickEdit,cardToCopy:w},null,8,["onOpenQuickEdit","onCloseQuickEdit","groupId","isQuickEdit","cardToCopy"])):h("",!0)]),_:2},1024))),128)),o.isAddCard?(i(),a("div",Tu,[v(s("textarea",{onKeydown:e[6]||(e[6]=P(y(()=>{},["prevent"]),["enter"])),onKeyup:e[7]||(e[7]=P((...w)=>r.addCard&&r.addCard(...w),["enter"])),class:"add-card-textarea","onUpdate:modelValue":e[8]||(e[8]=w=>o.cardTitle=w),placeholder:"Enter a title for this card..."},null,544),[[u,()=>r.addCard()],[O],[D,o.cardTitle]]),s("div",Au,[s("button",{onClick:e[9]||(e[9]=(...w)=>r.addCard&&r.addCard(...w))},"Add card"),s("span",{onClick:e[10]||(e[10]=w=>o.isAddCard=!1)},Ou)])])):h("",!0)]),_:1},8,["get-child-payload"]),o.isAddCard?h("",!0):(i(),a("div",{key:0,class:"open-card-container",onClick:e[12]||(e[12]=w=>o.isAddCard=!0)},Lu))]),o.isQuickEdit.boolean?(i(),a("div",{key:0,name:"quick-card-editor",onMousedown:e[13]||(e[13]=y(()=>{},["stop"])),onClick:e[14]||(e[14]=y(w=>o.isQuickEdit.boolean=!1,["stop"])),class:b(r.computedQuickEdit)},null,34)):h("",!0)])}var Eu=M(Mu,[["render",Ju],["__scopeId","data-v-02c0c59c"]]);const Gu={name:"board-menu",data(){return{openChangeBg:!1,images:null,stickers:null,colors:this.$store.getters.boardColors,search:"",stickerSearch:"",openChangeImg:!1,openChangeColor:!1,openStickers:!1}},created(){this.searchImages("nature"),this.searchStickers("Lets go")},methods:{async searchImages(t){const e=await K.getBgImages(t);this.images=e.photos.results.splice(0,10)},async searchStickers(t){const e=await K.getStickers(t);this.stickers=e.data},async onUploadImg(t){const e=await K.uploadImg(t);this.$emit("setBoardBg",e.url)},setBoardBg(t){this.$emit("setBoardBg",t)},setBoardClr(t){this.$emit("setBoardClr",t)},closeModal(){this.$emit("closeMenu")},goBack(){this.openChangeImg||this.openChangeColor||this.openStickers?(this.openChangeImg=!1,this.openChangeColor=!1,this.openStickers=!1):this.openChangeBg=!1},formattedTime(t){return G.getFormattedTime(t)},getChildPayload(t){return this.stickers[t]}},computed:{isFirstPage(){return!(this.openChangeBg||this.openChangeImg||this.openChangeColor||this.openStickers)},activities(){return this.$store.getters.currBoard.activities||[]}},components:{imgService:K,customModal:U,Container:ne,Draggable:ie}},L=t=>(de("data-v-3f5061d2"),t=t(),ce(),t),Pu=L(()=>s("p",{class:"header-title"},"Menu",-1)),Vu={key:0},Fu={class:"menu-options"},ju=L(()=>s("a",null,"Stickers",-1)),Ru=[ju],Hu=L(()=>s("i",{class:"fa-solid fa-image"},null,-1)),Qu=k(),Ku=L(()=>s("a",null,"Change background",-1)),qu=[Hu,Qu,Ku],zu=L(()=>s("hr",null,null,-1)),Wu=L(()=>s("ul",{class:"menu-options"},[s("li",null,[s("i",{class:"fa-solid fa-list-ul"}),k(),s("a",{class:"activity"},"Activity")])],-1)),Yu={key:0,class:"activities-container"},Xu={class:"avatar-container member"},Zu=["src"],ep={key:1},tp={class:"card-comment activities"},sp={class:"comment-by"},op={class:"activity-txt"},rp={class:"comment-date"},np={key:0,class:"bg-choose"},ip={class:"bg-choose-top"},lp=L(()=>s("img",{src:"https://res.cloudinary.com/trellox/image/upload/v1648369955/background_ffsmh3.jpg",alt:"background image picker"},null,-1)),ap=L(()=>s("p",null,"Photos",-1)),dp=[lp,ap],cp=L(()=>s("img",{src:"https://res.cloudinary.com/trellox/image/upload/v1648369959/colors_ucac3l.jpg",alt:"color picker"},null,-1)),up=L(()=>s("p",null,"Colors",-1)),pp=[cp,up],hp=L(()=>s("hr",null,null,-1)),mp=L(()=>s("h2",null,"Custom",-1)),gp={class:"bg-picker"},_p={class:"custom-bg"},fp=L(()=>s("i",{class:"fa-solid fa-plus"},null,-1)),yp={key:0,class:"choose-sticker"},vp=["src","alt"],bp={key:0,class:"bg-choose-img"},kp={key:0,class:"bg-images"},Cp=["onClick"],wp=["src"],Bp={key:0,class:"bg-choose-color"},$p={key:0,class:"bg-colors"},Sp=["onClick"];function xp(t,e,n,l,o,r){const p=f("Draggable"),d=f("Container"),c=f("custom-modal");return i(),C(c,{isFirstPage:r.isFirstPage,onGoBack:r.goBack,class:"board-menu",onCloseModal:r.closeModal},{header:g(()=>[Pu]),default:g(()=>[!o.openChangeBg&&!o.openChangeImg&&!o.openChangeColor&&!o.openStickers?(i(),a("menu",Vu,[s("ul",Fu,[s("li",{class:"stickers",onClick:e[0]||(e[0]=_=>o.openStickers=!0)},Ru),s("li",{class:"change-bg-btn",onClick:e[1]||(e[1]=_=>o.openChangeBg=!0)},qu)]),zu,Wu,r.activities.length?(i(),a("div",Yu,[(i(!0),a($,null,B(r.activities.splice(0,20),_=>(i(),a("div",{class:"card-comment-container",key:_.id},[s("div",Xu,[_.byMember.imgUrl?(i(),a("img",{key:0,src:_.byMember.imgUrl,alt:""},null,8,Zu)):(i(),a("span",ep,m(_.byMember._id?_.byMember.fullname.split(" ")[0].split("")[0]+_.byMember.fullname.split(" ")[1].split("")[0]:"G"),1))]),s("div",tp,[s("div",null,[s("span",sp,m(_.byMember.fullname),1),s("span",op,m(_.txt),1)]),s("span",rp,m(r.formattedTime(_.createdAt)),1)])]))),128))])):h("",!0)])):h("",!0),I(Q,{name:"inside-menu"},{default:g(()=>[o.openChangeBg&&!o.openChangeImg&&!o.openChangeColor&&!o.openStickers?(i(),a("div",np,[s("div",ip,[s("div",{onClick:e[2]||(e[2]=_=>o.openChangeImg=!0),class:"bg-picker"},dp),s("div",{onClick:e[3]||(e[3]=_=>o.openChangeColor=!0),class:"bg-picker"},pp)]),hp,mp,s("div",gp,[s("div",_p,[s("label",null,[fp,s("input",{type:"file",onChange:e[4]||(e[4]=(..._)=>r.onUploadImg&&r.onUploadImg(..._))},null,32)])])])])):h("",!0)]),_:1}),I(Q,{name:"inside-menu"},{default:g(()=>[o.openStickers?(i(),a("div",yp,[v(s("input",{class:"custom-input",placeholder:"Search sticker",type:"text","onUpdate:modelValue":e[5]||(e[5]=_=>o.stickerSearch=_),onInput:e[6]||(e[6]=_=>r.searchStickers(o.stickerSearch))},null,544),[[D,o.stickerSearch]]),o.stickers?(i(),C(d,{key:0,class:"stickers-list","group-name":"5","get-child-payload":r.getChildPayload},{default:g(()=>[(i(!0),a($,null,B(o.stickers,_=>(i(),C(p,{onMousedown:e[7]||(e[7]=u=>this.$store.commit({type:"stickerDrag",isDrag:!0})),key:_.id},{default:g(()=>[s("img",{src:_.images.original_still.url,alt:_.title},null,8,vp)]),_:2},1024))),128))]),_:1},8,["get-child-payload"])):h("",!0)])):h("",!0)]),_:1}),I(Q,{name:"inside-menu"},{default:g(()=>[o.openChangeImg?(i(),a("div",bp,[v(s("input",{class:"custom-input",placeholder:"Photos",type:"text","onUpdate:modelValue":e[8]||(e[8]=_=>o.search=_),onInput:e[9]||(e[9]=_=>r.searchImages(o.search))},null,544),[[D,o.search]]),o.images?(i(),a("ul",kp,[(i(!0),a($,null,B(o.images,_=>(i(),a("li",{key:_.id},[s("div",{onClick:u=>r.setBoardBg(_.urls.full)},[s("img",{src:_.urls.small},null,8,wp)],8,Cp)]))),128))])):h("",!0)])):h("",!0)]),_:1}),I(Q,{name:"inside-menu"},{default:g(()=>[o.openChangeColor?(i(),a("div",Bp,[o.images?(i(),a("ul",$p,[(i(!0),a($,null,B(o.colors,_=>(i(),a("li",{key:_},[s("div",{onClick:u=>r.setBoardClr(_),class:"bg-color",style:S({"background-color":_.body})},null,12,Sp)]))),128))])):h("",!0)])):h("",!0)]),_:1})]),_:1},8,["isFirstPage","onGoBack","onCloseModal"])}var Mp=M(Gu,[["render",xp],["__scopeId","data-v-3f5061d2"]]);const Ip={props:{},components:{customModal:U},data(){return{filterBy:null}},created(){this.filterBy=JSON.parse(JSON.stringify(this.$store.getters.currBoard.filterBy))},methods:{closeModal(){this.$emit("closeModal")},updateKey(){this.$emit("updateKey","filterBy",JSON.parse(JSON.stringify(this.filterBy)))}},computed:{members(){return this.$store.getters.currBoard.members},labels(){return this.$store.getters.currBoard.labels}},unmounted(){},watch:{filterBy:{handler(){this.updateKey()},deep:!0}}},Dp=k(" Filter "),Tp=s("p",null,"Members",-1),Ap={key:0},Up=s("div",{class:"avatar-container custom"},[s("i",{class:"fa-solid fa-user"})],-1),Op=s("span",{class:"label-txt"},"No members",-1),Np=["value"],Lp={class:"avatar-container"},Jp=["src"],Ep={key:1},Gp={class:"label-txt"},Pp={class:"username"},Vp=s("p",null,"Due date",-1),Fp={key:0},jp=s("div",{class:"avatar-container custom"},[s("i",{class:"fa-solid fa-calendar-days"})],-1),Rp=s("span",{class:"label-txt"},"No dates",-1),Hp=s("div",{class:"avatar-container due-over"},[s("i",{class:"fa-regular fa-clock"})],-1),Qp=s("span",{class:"label-txt"},"Over due",-1),Kp=s("div",{class:"avatar-container due-tomorrow"},[s("i",{class:"fa-regular fa-clock"})],-1),qp=s("span",{class:"label-txt"},"Due in the next day",-1),zp={key:0},Wp=s("p",null,"Labels",-1),Yp={key:0},Xp=s("div",{class:"avatar-container custom no-labels"},[s("i",{class:"fa-solid fa-tag"})],-1),Zp=s("span",{class:"label-txt"},"No labels",-1),eh=["onUpdate:modelValue","value"];function th(t,e,n,l,o,r){const p=f("custom-modal");return i(),C(p,{onCloseModal:r.closeModal,class:"board-filter-body"},{header:g(()=>[Dp]),default:g(()=>[s("section",null,[s("div",null,[Tp,s("ul",null,[o.filterBy.txt?h("",!0):(i(),a("li",Ap,[s("label",null,[v(s("input",{"onUpdate:modelValue":e[0]||(e[0]=d=>o.filterBy.by.none=d),class:b({full:o.filterBy.by.none}),type:"checkbox"},null,2),[[H,o.filterBy.by.none]]),Up,Op])])),(i(!0),a($,null,B(r.members,d=>(i(),a("li",{key:d._id},[s("label",null,[v(s("input",{"onUpdate:modelValue":e[1]||(e[1]=c=>o.filterBy.by.options=c),class:b({full:o.filterBy.by.options.includes(d._id)}),value:d._id,type:"checkbox"},null,10,Np),[[H,o.filterBy.by.options]]),s("div",Lp,[d!=null&&d.imgUrl?(i(),a("img",{key:0,src:d.imgUrl,alt:""},null,8,Jp)):(i(),a("span",Ep,m(d!=null&&d._id?d.fullname.split(" ")[0].split("")[0]+d.fullname.split(" ")[1].split("")[0]:"G"),1))]),s("span",Gp,m(d.fullname),1),s("span",Pp,"@"+m(d.username),1)])]))),128))])]),s("div",null,[Vp,s("ul",null,[o.filterBy.txt?h("",!0):(i(),a("li",Fp,[s("label",null,[v(s("input",{"onUpdate:modelValue":e[2]||(e[2]=d=>o.filterBy.due.none=d),class:b({full:o.filterBy.due.none}),type:"checkbox"},null,2),[[H,o.filterBy.due.none]]),jp,Rp])])),s("li",null,[s("label",null,[v(s("input",{"onUpdate:modelValue":e[3]||(e[3]=d=>o.filterBy.due.over=d),class:b({full:o.filterBy.due.over}),type:"checkbox"},null,2),[[H,o.filterBy.due.over]]),Hp,Qp])]),s("li",null,[s("label",null,[v(s("input",{"onUpdate:modelValue":e[4]||(e[4]=d=>o.filterBy.due.tomorrow=d),class:b({full:o.filterBy.due.tomorrow}),type:"checkbox"},null,2),[[H,o.filterBy.due.tomorrow]]),Kp,qp])])])]),r.labels.length?(i(),a("div",zp,[Wp,s("ul",null,[o.filterBy.txt?h("",!0):(i(),a("li",Yp,[s("label",null,[v(s("input",{"onUpdate:modelValue":e[5]||(e[5]=d=>o.filterBy.label.none=d),class:b({full:o.filterBy.label.none}),type:"checkbox"},null,2),[[H,o.filterBy.label.none]]),Xp,Zp])])),(i(!0),a($,null,B(r.labels,d=>(i(),a("li",{key:d.id},[s("label",null,[v(s("input",{"onUpdate:modelValue":c=>o.filterBy.label.options=c,class:b({full:o.filterBy.label.options.includes(d.id)}),value:d.id,type:"checkbox"},null,10,eh),[[H,o.filterBy.label.options]]),s("span",{class:b(["label-txt labels",d.className])},m(d.title),3)])]))),128))])])):h("",!0)])]),_:1},8,["onCloseModal"])}var sh=M(Ip,[["render",th]]);const oh={components:{customModal:U},data(){return{filterBy:"",users:""}},methods:{closeModal(){this.$emit("closeModal")},filterUsers(){this.users=this.$store.getters.users;const t=new RegExp(this.filterBy,"i");this.users=this.users.filter(e=>t.test(e.fullname)||t.test(e.email))},inviteUser(t){const e=JSON.parse(JSON.stringify(this.$store.getters.currBoard));e.members.reduce((l,o)=>(o._id===t._id&&l++,l),0)||(e.members.push(t),this.$store.dispatch({type:"saveBoard",board:e}))}},computed:{members(){}},unmounted(){}},rh=k(" Invite to board "),nh={class:"users-container"},ih=["onClick"],lh={class:"user-container"},ah={class:"user"},dh={class:"avatar"},ch={class:"img"},uh={key:1},ph={class:"user-info"},hh={class:"fullname"};function mh(t,e,n,l,o,r){const p=f("custom-modal"),d=N("focus");return i(),C(p,{onCloseModal:r.closeModal,class:"user-invite"},{header:g(()=>[rh]),default:g(()=>[v(s("input",{"onUpdate:modelValue":e[0]||(e[0]=c=>o.filterBy=c),onInput:e[1]||(e[1]=(...c)=>r.filterUsers&&r.filterUsers(...c)),class:"custom-input",type:"text",placeholder:"Email address or name..."},null,544),[[d],[D,o.filterBy]]),s("div",nh,[(i(!0),a($,null,B(o.users,c=>(i(),a("div",{class:"users",key:c._id,onClick:_=>r.inviteUser(c)},[s("div",lh,[s("div",ah,[s("div",dh,[s("div",ch,[c.imgUrl?(i(),a("span",{key:0,style:S(`background-image: url('${c.imgUrl}')`)},null,4)):(i(),a("span",uh,m(c.fullname.split(" ")[0].split("")[0]+c.fullname.split(" ")[1].split("")[0]),1))])]),s("div",ph,[s("div",hh,m(c.fullname),1)])])])],8,ih))),128))])]),_:1},8,["onCloseModal"])}var gh=M(oh,[["render",mh]]);const be="board-changed",_h="",z=fh();z.setup();function fh(){var t=null;return{async setup(){t=Fe(_h)},on(n,l){t.on(n,l)},off(n,l=null){!t||(l?t.off(n,l):t.removeAllListeners(n))},emit(n,l){t.emit(n,l)},terminate(){t=null}}}const yh={components:{groupPreview:Eu,Container:ne,Draggable:ie,appHeader:we,boardMenu:Mp,boardFilter:sh,userInvite:gh},data(){return{isAddGroup:!1,groupTitle:"",board:null,openMenu:!1,savingGroup:!1,lastBoard:null,groupsCount:0,openFilter:!1,openInvite:!1,editTitle:!1,headerClr:null,filteringCount:-1}},async created(){var l;const{boardId:t}=this.$route.params;z.emit("board room",t),z.emit("setMemberJoin",((l=this.$store.getters.loggedinUser)==null?void 0:l._id)||""),z.on("updateMembersCount",o=>{console.log("user ids watching this board now: ",o),this.$store.commit({type:"setOnlineUsersOnBoard",users:o})}),this.board=await this.$store.dispatch({type:"setCurrBoard",boardId:t}),this.updateKey("recentlyViewed",Date.now());var e=JSON.parse(JSON.stringify(this.board));const n=new re;e.style.bgImgUrl&&(this.headerClr=await n.getColorAsync(e.style.bgImgUrl)),e=this.filter(e),await this.$store.dispatch({type:"saveBoard",board:e}),this.board=e},methods:{async updateKey(t,e){var n=JSON.parse(JSON.stringify(this.board));e==="toggle"?n[t]=!n[t]:n[t]=e,t==="filterBy"&&(n=this.filter(n)),await this.$store.dispatch({type:"saveBoard",board:n}),this.board=n},calcIfTomorrow(t){const e=new Date(t),n=new Date(Date.now());var l=e.getHours()*60*60*1e3;t-=l;var o=t-Date.now();const r=o-24*60*60*1e3<0,p=t>Date.now(),d=e.getDay()!==n.getDay();return r&&p&&d},async addGroup(){!this.groupTitle||(await this.$store.dispatch({type:"addGroup",title:this.groupTitle}),this.groupTitle="")},async onGroupDrop(t){try{const e=Object.assign({},this.board);e.groups=Ae(e.groups,t),this.lastBoard=JSON.parse(JSON.stringify(this.board)),this.board=e,await this.$store.dispatch({type:"saveBoard",board:e})}catch(e){console.log("err",e),this.board=this.lastBoard}},getChildPayload(t){return this.$store.getters.currBoard.members[t]},async onCardDrop({cards:t,groupId:e}){try{const n=JSON.parse(JSON.stringify(this.board)),l=this.board.groups.findIndex(o=>o.id===e);n.groups[l].cards=t,this.groupsCount===0&&(this.lastBoard=JSON.parse(JSON.stringify(this.board))),this.board=n,this.groupsCount++,this.groupsCount===this.board.groups.length&&(await this.$store.dispatch({type:"saveBoard",board:n}),this.groupsCount=0)}catch(n){console.log("err",n),this.board=this.lastBoard}},async setBoardBg(t){const e=JSON.parse(JSON.stringify(this.board));e.style.bgColor="",e.style.bgHeader="",e.style.bgImgUrl=t;const n=new re;this.headerClr=await n.getColorAsync(e.style.bgImgUrl),this.$store.dispatch({type:"saveBoard",board:e})},setBoardClr(t){const e=JSON.parse(JSON.stringify(this.board));e.style.bgImgUrl="",e.style.bgColor=t.body,e.style.bgHeader=t.header,this.headerClr=null,this.$store.dispatch({type:"saveBoard",board:e})},editBoardTitle(){if(this.editTitle=!1,!this.board.title)return;const t=JSON.parse(JSON.stringify(this.board));this.$store.dispatch({type:"saveBoard",board:t})},filter(t){const e=t.filterBy,n=e.by.none===!1&&e.by.options.length===0&&e.due.none===!1&&e.due.over===!1&&e.due.tomorrow===!1&&e.label.none===!1&&e.label.options.length===0;return n?(this.filteringCount=-1,t.groups=t.groups.map(l=>(l.cards=l.cards.map(o=>(o.isShown=n,o)),l)),t):(this.filteringCount=0,t.groups=t.groups.map(l=>(l.cards=l.cards.map(o=>{var r=[!1,!1,!1],p=[!1,!1,!1];if(e.by.none&&(r[0]=!0,o.memberIds.length===0&&(p[0]=!0)),e.by.options.length){r[0]=!0;var d=o.memberIds.filter(_=>e.by.options.includes(_));d.length>0&&(p[0]=!0)}if(e.due.none&&(r[1]=!0,o.dueDate&&(p[1]=!0)),e.due.over&&(r[1]=!0,o.dueDate>Date.now()&&(p[1]=!0)),e.due.tomorrow&&(r[1]=!0,this.calcIfTomorrow(o.dueDate)&&(p[1]=!0)),e.label.none&&(r[2]=!0,o.labelIds.length===0&&(p[2]=!0)),e.label.options.length){r[2]=!0;var c=o.labelIds.filter(_=>e.label.options.includes(_));c.length>0&&(p[2]=!0)}return r[0]===p[0]&&r[1]===p[1]&&r[2]===p[2]?(this.filteringCount++,o.isShown=!0):o.isShown=!1,o}),l)),t)},resetFilter(){const t={by:{none:!1,options:[]},due:{none:!1,over:!1,tomorrow:!1},label:{none:!1,options:[]}};this.updateKey("filterBy",t)},openDashboard(){const t=this.$router.currentRoute._value.fullPath;this.$router.push(`${t}/dashboard`)},openInviteModal(){this.openInvite=!0}},computed:{boardFromStore(){return this.$store.getters.currBoard},members(){return this.$store.getters.currBoard.members},isLoading(){return this.$store.getters.isLoading}},unmounted(){var t;z.emit("setMemberLeave",((t=this.$store.getters.loggedinUser)==null?void 0:t._id)||"")},watch:{boardFromStore:{handler(){this.board=this.boardFromStore},deep:!0}}},J=t=>(de("data-v-8f431df8"),t=t(),ce(),t),vh={class:"board-wrapper"},bh={class:"board-view"},kh={class:"left-nav"},Ch=J(()=>s("span",{class:"seperator"},"|",-1)),wh=["src"],Bh={key:1},$h=J(()=>s("span",null,"Invite",-1)),Sh=[$h],xh={class:"right-nav"},Mh=J(()=>s("i",{class:"fa-solid fa-chart-line"},null,-1)),Ih=J(()=>s("span",null,"Dashboard",-1)),Dh=[Mh,Ih],Th=J(()=>s("i",{class:"fa-solid fa-filter"},null,-1)),Ah=J(()=>s("span",null,"Filter",-1)),Uh={key:0,class:"filterCount"},Oh=J(()=>s("i",{class:"fa-solid fa-ellipsis"},null,-1)),Nh=k(),Lh=J(()=>s("span",null,"Show menu",-1)),Jh=[Oh,Nh,Lh],Eh={key:0,class:"loading-board"},Gh=J(()=>s("img",{src:"https://res.cloudinary.com/trellox/image/upload/v1648921970/loading_thf5st.gif"},null,-1)),Ph=J(()=>s("i",{class:"fa-solid fa-plus"},null,-1)),Vh=J(()=>s("span",null,"Add another list",-1)),Fh=[Ph,Vh],jh={key:1,class:"add-group-container"},Rh={class:"add-group-actions"},Hh=J(()=>s("i",{class:"fa-solid fa-xmark"},null,-1)),Qh=[Hh];function Kh(t,e,n,l,o,r){var me,ge,_e;const p=f("app-header"),d=f("draggable"),c=f("container"),_=f("user-invite"),u=f("boardFilter"),O=f("board-menu"),w=f("group-preview"),R=f("Draggable"),Z=f("Container"),x=f("router-view"),q=N("focus"),ee=N("click-outside");return o.board?(i(),a("section",{key:0,class:"scroll-wrapper",style:S({"background-image":"url("+o.board.style.bgImgUrl+")","background-color":o.board.style.bgColor})},[s("div",vh,[I(p,{class:b([((me=o.headerClr)==null?void 0:me.isDark)||!o.headerClr?"white-color":"dark-color","board-header"]),style:S({"background-color":o.headerClr?o.headerClr.hex:o.board.style.bgHeader})},null,8,["class","style"]),s("div",bh,[s("nav",{class:b([((ge=o.headerClr)==null?void 0:ge.isDark)||!o.headerClr?"white-color":"dark-color","board-nav"])},[s("div",kh,[o.editTitle?v((i(),a("input",{key:1,style:S("width:"+o.board.title.length*12+"px"),class:"custom-input, title-input",type:"text","onUpdate:modelValue":e[1]||(e[1]=T=>o.board.title=T),onKeyup:e[2]||(e[2]=P((...T)=>r.editBoardTitle&&r.editBoardTitle(...T),["enter"]))},null,36)),[[q],[D,o.board.title],[ee,()=>r.editBoardTitle()]]):(i(),a("h2",{key:0,onClick:e[0]||(e[0]=T=>o.editTitle=!0)},m(o.board.title),1)),s("button",{class:b(["star",{full:o.board.isStarred}]),onClick:e[3]||(e[3]=T=>r.updateKey("isStarred","toggle"))},null,2),Ch,r.members.length?(i(),C(c,{key:2,style:{height:"32px"},class:"members-container",orientation:"horizontal","group-name":"3","get-child-payload":r.getChildPayload},{default:g(()=>[(i(!0),a($,null,B(r.members,T=>(i(),C(d,{onMousedown:e[4]||(e[4]=E=>this.$store.commit({type:"memberDrag",isDrag:!0})),style:{height:"32px"},class:"avatar-container",key:T._id,title:T.fullname},{default:g(()=>[T.imgUrl?(i(),a("img",{key:0,src:T.imgUrl,alt:""},null,8,wh)):(i(),a("span",Bh,m(T.fullname.split(" ")[0].split("")[0]+T.fullname.split(" ")[1].split("")[0]),1))]),_:2},1032,["title"]))),128))]),_:1},8,["get-child-payload"])):h("",!0),s("button",{class:"invite",onClick:e[5]||(e[5]=T=>r.openInviteModal())},Sh),o.openInvite?v((i(),C(_,{key:3,onCloseModal:e[6]||(e[6]=T=>o.openInvite=!1)},null,512)),[[ee,()=>o.openInvite=!1]]):h("",!0)]),s("div",xh,[s("button",{onClick:e[7]||(e[7]=(...T)=>r.openDashboard&&r.openDashboard(...T)),class:"dashboard-btn"},Dh),s("button",{onClick:e[9]||(e[9]=T=>o.openFilter=!o.openFilter),class:b(["filter",{active1:o.openFilter,active2:this.filteringCount>-1}])},[Th,Ah,this.filteringCount>-1?(i(),a("span",Uh,m(this.filteringCount),1)):h("",!0),this.filteringCount>-1?(i(),a("span",{key:1,class:"filterRestart",onClick:e[8]||(e[8]=y((...T)=>r.resetFilter&&r.resetFilter(...T),["stop"]))})):h("",!0)],2),s("button",{class:"menu",onClick:e[10]||(e[10]=T=>o.openMenu=!o.openMenu)},Jh)]),o.openFilter?v((i(),C(u,{key:0,onUpdateKey:r.updateKey,onCloseModal:e[11]||(e[11]=T=>o.openFilter=!1)},null,8,["onUpdateKey"])),[[ee,()=>o.openFilter=!1]]):h("",!0)],2),I(Q,{name:"menu"},{default:g(()=>[o.openMenu?(i(),C(O,{key:0,onCloseMenu:e[12]||(e[12]=T=>o.openMenu=!1),onSetBoardClr:r.setBoardClr,onSetBoardBg:r.setBoardBg},null,8,["onSetBoardClr","onSetBoardBg"])):h("",!0)]),_:1}),r.isLoading?(i(),a("div",Eh,[s("h1",{style:S({color:((_e=o.headerClr)==null?void 0:_e.isDark)||!o.headerClr?"white":"#091e42"})},"TRELLOX",4),Gh])):(i(),C(Z,{key:1,"drag-class":"on-dragging",orientation:"horizontal",class:"group-container",onDrop:e[18]||(e[18]=T=>r.onGroupDrop(T))},{default:g(()=>{var T;return[(i(!0),a($,null,B(o.board.groups,E=>(i(),C(R,{key:E.id},{default:g(()=>[I(w,{group:E,onOnCardDrop:r.onCardDrop},null,8,["group","onOnCardDrop"])]),_:2},1024))),128)),o.isAddGroup?(i(),a("div",jh,[v(s("input",{onKeyup:e[14]||(e[14]=P((...E)=>r.addGroup&&r.addGroup(...E),["enter"])),"onUpdate:modelValue":e[15]||(e[15]=E=>o.groupTitle=E),type:"text",placeholder:"Enter list title..."},null,544),[[D,o.groupTitle],[q]]),s("div",Rh,[s("button",{onClick:e[16]||(e[16]=(...E)=>r.addGroup&&r.addGroup(...E))},"Add list"),s("span",{onClick:e[17]||(e[17]=E=>o.isAddGroup=!1)},Qh)])])):(i(),a("div",{key:0,style:S({color:((T=o.headerClr)==null?void 0:T.isDark)||!o.headerClr?"white":"#091e42"}),class:"open-group-container",onClick:e[13]||(e[13]=E=>o.isAddGroup=!0)},Fh,4))]}),_:1})),I(Q,{name:"dashboard"},{default:g(()=>[I(x)]),_:1})])])],4)):h("",!0)}var qh=M(yh,[["render",Kh],["__scopeId","data-v-8f431df8"]]);le.register(...ue);const zh=pe({components:{DoughnutChart:je},created(){this.loadChart()},data(){return{boardData:{labels:[],datasets:[{data:[],backgroundColor:["#61bd4f","#f2d600","#ff9f1a","#eb5a46","#c377e0","#0079bf","#00c2e0","#51e898","#ff78cb","#344563","#b3bac5"],fontColor:["white"]}]},options:{plugins:{title:{display:!0,text:"Tasks by labels",font:{size:28,weigth:"bold",family:"Roboto"}},legend:{position:!1}}}}},methods:{loadChart(){le.defaults.color="#ffff";const t=JSON.parse(JSON.stringify(this.$store.getters.currBoard)),e=t.labels,n=JSON.parse(JSON.stringify(this.boardData));var l={};t.groups.forEach(o=>{o.cards.forEach(r=>{r.labelIds.length&&r.labelIds.forEach(p=>{l[p]?l[p]++:l[p]=1})})});for(const o in l){const r=e.find(p=>p.id===o);r&&(n.labels.push(r.title),n.datasets[0].data.push(l[o]))}this.boardData=n}}});function Wh(t,e,n,l,o,r){const p=f("DoughnutChart",!0);return i(),C(p,{chartData:t.boardData,options:t.options},null,8,["chartData","options"])}var Yh=M(zh,[["render",Wh]]);le.register(...ue);const Xh=pe({components:{LineChart:Re},created(){this.loadChart()},data(){return{boardData:{labels:[],datasets:[{label:"Activity",data:[],backgroundColor:["#61bd4f","#f2d600","#ff9f1a","#eb5a46","#c377e0","#0079bf","#00c2e0","#51e898","#ff78cb","#344563","#b3bac5"],fontColor:["white"]}]},options:{plugins:{legend:{display:!1},title:{display:!0,text:"Activity per member",font:{size:28,weigth:"bold",family:"Roboto"}}},elements:{line:{backgroundColor:"white",borderColor:"white",borderWidth:3}},scales:{x:{grid:{display:!1}},y:{grid:{display:!1}}}}}},methods:{loadChart(){const t=JSON.parse(JSON.stringify(this.$store.getters.currBoard));var e={};t.activities.forEach(n=>{e[n.byMember.fullname]?e[n.byMember.fullname]++:e[n.byMember.fullname]=1});for(const n in e)this.boardData.labels.push(n),this.boardData.datasets[0].data.push(e[n])}}});function Zh(t,e,n,l,o,r){const p=f("LineChart",!0);return i(),C(p,{chartData:t.boardData,options:t.options},null,8,["chartData","options"])}var em=M(Xh,[["render",Zh]]);le.register(...ue);const tm=pe({components:{BarChart:He},created(){this.loadChart()},data(){return{boardData:{labels:[],datasets:[{label:"Tasks by lists",data:[],backgroundColor:["#61bd4f","#f2d600","#ff9f1a","#eb5a46","#c377e0","#0079bf","#00c2e0","#51e898","#ff78cb","#344563","#b3bac5"],fontColor:["white"]}]},options:{plugins:{legend:{display:!1},title:{display:!0,text:"Tasks by lists",font:{size:28,weigth:"bold",family:"Roboto"}}},elements:{line:{backgroundColor:"black",borderColor:"white",borderWidth:3}},scales:{x:{grid:{display:!1}},y:{grid:{display:!1}}}}}},methods:{loadChart(){const t=JSON.parse(JSON.stringify(this.$store.getters.currBoard));var e={};t.groups.forEach(n=>{e[n.title]=n.cards.length});for(const n in e)this.boardData.labels.push(n),this.boardData.datasets[0].data.push(e[n])}}});function sm(t,e,n,l,o,r){const p=f("BarChart",!0);return i(),C(p,{chartData:t.boardData,options:t.options},null,8,["chartData","options"])}var om=M(tm,[["render",sm]]);const rm={name:"",data(){return{boardId:null,todosMap:{}}},created(){this.boardId=this.$route.params.boardId,this.countTodos()},methods:{closeDashboard(){this.$router.push(`/board/${this.boardId}`)},countTodos(){var t={todosCount:0,doneTodos:0,checklistsCount:0,doneChecklists:0};this.board.groups.forEach(e=>{e.cards.forEach(n=>{n.checklists.forEach(l=>{const o=l.todos.reduce((r,p)=>(p.isDone&&(t.doneTodos++,r++),t.todosCount++,r),0);t.doneChecklists+=o===l.todos.length?1:0,t.checklistsCount++})})}),this.todosMap=t}},computed:{board(){return this.$store.getters.currBoard},cardsDetails(){var t=0;return this.board.groups.forEach(e=>{t+=e.cards.length}),t},onlineUsers(){return this.$store.getters.onlineUsersOnBoard}},components:{DoughnutChart:Yh,LineChart:em,BarChart:om,"vue3-autocounter":Qe}},nm={class:"dashboard"},im={class:"title"},lm={key:0},am=s("i",{class:"fa-solid fa-star"},null,-1),dm=[am],cm={class:"cards-container"},um={class:"dash-card members"},pm={class:"left"},hm=k("Member"),mm={key:0},gm={class:"right board-members"},_m=["title"],fm=["src"],ym={key:1},vm={class:"dash-card"},bm={class:"left"},km=s("h4",null,"Tasks",-1),Cm={class:"right tasks"},wm={class:"mini-header todos"},Bm=k(" Todos "),$m=s("i",{class:"fa-solid fa-check-double"},null,-1),Sm={class:"calc"},xm=s("br",null,null,-1),Mm={class:"mini-header"},Im=k(" Checklists "),Dm=s("i",{class:"fa-solid fa-list-check"},null,-1),Tm={class:"calc"},Am={class:"dash-card"},Um=s("span",null,null,-1),Om={class:"center"},Nm=s("div",{class:"ring-container"},[s("div",{class:"ringring"}),s("div",{class:"circle"})],-1),Lm={key:0},Jm={key:1},Em={class:"charts-container"},Gm={class:"chart"},Pm={class:"chart"},Vm={class:"chart"};function Fm(t,e,n,l,o,r){const p=f("vue3-autocounter"),d=f("doughnut-chart"),c=f("LineChart"),_=f("BarChart");return i(),a("section",nm,[s("span",{onClick:e[0]||(e[0]=(...u)=>r.closeDashboard&&r.closeDashboard(...u)),class:b(["close-modal-button",t.coverButtonClass])},null,2),s("div",im,[s("h2",null,m(r.board.title),1),r.board.isStarred?(i(),a("span",lm,dm)):h("",!0)]),s("p",null,"Created By: "+m(r.board.createdBy.fullname),1),s("div",cm,[s("div",um,[s("div",pm,[s("h2",null,[I(p,{ref:"counter",startAmount:0,endAmount:r.board.members.length,duration:1,autoinit:!0},null,8,["endAmount"])]),s("h4",null,[hm,r.board.members.length>1?(i(),a("span",mm,"s")):h("",!0)])]),s("div",gm,[(i(!0),a($,null,B(r.board.members,u=>(i(),a("div",{class:"avatar-container",key:u._id,title:u.fullname},[u.imgUrl?(i(),a("img",{key:0,src:u.imgUrl,alt:""},null,8,fm)):(i(),a("span",ym,m(u.fullname.split(" ")[0].split("")[0]+u.fullname.split(" ")[1].split("")[0]),1))],8,_m))),128))])]),s("div",vm,[s("div",bm,[s("h2",null,[I(p,{ref:"counter",startAmount:0,endAmount:r.cardsDetails,duration:1,autoinit:!0},null,8,["endAmount"])]),km]),s("div",Cm,[s("div",wm,[s("h2",null,[s("span",null,[I(p,{ref:"counter",startAmount:0,endAmount:this.todosMap.todosCount,duration:1,autoinit:!0},null,8,["endAmount"])]),Bm,$m])]),s("span",Sm,m(this.todosMap.doneTodos)+" of them marked as Done",1),xm,s("div",Mm,[s("h2",null,[s("span",null,[I(p,{ref:"counter",startAmount:0,endAmount:this.todosMap.checklistsCount,duration:1,autoinit:!0},null,8,["endAmount"])]),Im,Dm])]),s("span",Tm,m(this.todosMap.doneChecklists)+" of them marked as Done",1)])]),s("div",Am,[Um,s("div",Om,[Nm,s("h2",null,[I(p,{ref:"counter",startAmount:0,endAmount:r.onlineUsers.length,duration:1,autoinit:!0},null,8,["endAmount"])]),r.onlineUsers.length>1?(i(),a("h4",Lm,"Members online")):(i(),a("h4",Jm,"Member online"))])])]),s("div",Em,[s("div",Gm,[I(d)]),s("div",Pm,[I(c)]),s("div",Vm,[I(_)])])])}var jm=M(rm,[["render",Fm]]);const Oe=Ke({history:qe("/"),routes:[{path:"/",name:"home",component:$t},{path:"/login",name:"login",component:jt},{path:"/signup",name:"signup",component:ls},{path:"/workspace",name:"workspace",component:tn},{path:"/board/:boardId",name:"board",component:qh,children:[{path:"edit/:cardId",component:Te},{path:"dashboard",component:jm}]}]});var Rm={state:{boards:[],currBoard:null,labelTitleShown:!1,labelColors:["color0","color1","color2","color3","color4","color5","color6","color7","color8","color9","color10"],imagePicker:["https://images.unsplash.com/photo-1483728642387-6c3bdd6c93e5?crop=entropy&cs=srgb&fm=jpg&ixid=MnwzMTI4NzN8MHwxfHNlYXJjaHw0fHxtb3VudGFpbnxlbnwwfHx8fDE2NDgyMjMxMjg&ixlib=rb-1.2.1&q=85","https://images.unsplash.com/photo-1480497490787-505ec076689f?ixlib=rb-1.2.1&q=85&fm=jpg&crop=entropy&cs=srgb","https://images.unsplash.com/photo-1454496522488-7a8e488e8606?crop=entropy&cs=srgb&fm=jpg&ixid=MnwzMTI4NzN8MHwxfHNlYXJjaHwzfHxtb3VudGFpbnxlbnwwfHx8fDE2NDgyMjMxMjg&ixlib=rb-1.2.1&q=85","https://images.unsplash.com/photo-1433477155337-9aea4e790195?ixlib=rb-1.2.1&q=85&fm=jpg&crop=entropy&cs=srgb"],boardColors:[{body:"#0079bf",header:"#0066a0"},{body:"#d29034",header:"#b0792c"},{body:"#519839",header:"#448030"},{body:"#b04632",header:"#943b2a"},{body:"#89609e",header:"#735185"},{body:"#cd5a91",header:"#ac4c7a"},{body:"#4bbf6b",header:"#3fa05a"},{body:"#00aecc",header:"#0092ab"}],coverColors:["#7BC86C","#F5DD29","#FFAF3F","#EF7564","#CD8DE5","#5BA4CF","#29CCE5","#6DECA9","#FF8ED4","#172B4D"],coverImages:["https://images.unsplash.com/photo-1499750310107-5fef28a66643?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2070&q=80","https://images.unsplash.com/photo-1500673922987-e212871fec22?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80","https://images.unsplash.com/photo-1486870591958-9b9d0d1dda99?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80","https://images.unsplash.com/photo-1518655048521-f130df041f66?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80","https://images.unsplash.com/photo-1463584954611-9d8ebd80dfd2?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80","https://images.unsplash.com/photo-1483835724473-d69ca66efb25?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80"],isMemberDrag:!1,isStickerDrag:!1,onlineUsersOnBoard:[]},getters:{boards(t){return JSON.parse(JSON.stringify(t.boards))},currBoard(t){return JSON.parse(JSON.stringify(t.currBoard))},labelTitleShown(t){return t.labelTitleShown},imagePicker(t){return t.imagePicker},boardColors(t){return t.boardColors},labelColors(t){return JSON.parse(JSON.stringify(t.labelColors))},coverColors(t){return JSON.parse(JSON.stringify(t.coverColors))},coverImages(t){return JSON.parse(JSON.stringify(t.coverImages))},isMemberDrag(t){return t.isMemberDrag},isStickerDrag(t){return t.isStickerDrag},onlineUsersOnBoard(t){return t.onlineUsersOnBoard}},mutations:{setBoards(t,{boards:e}){t.boards=e},setCurrBoard(t,{board:e}){t.currBoard=e},toggleLabelTitle(t){t.labelTitleShown=!t.labelTitleShown},removeBoard(t,{id:e}){const n=t.boards.findIndex(l=>l._id===e);t.boards.splice(n,1)},saveBoard(t,{board:e}){const n=t.boards.findIndex(l=>l._id===e._id);n!==-1?(t.currBoard&&e._id===t.currBoard._id&&(t.currBoard=e),t.boards.splice(n,1,e)):(t.boards.push(e),t.currBoard=e)},addGroup(t,{emptyGroup:e}){t.currBoard.groups.push(e)},addActivity(t,{activity:e,clearAct:n}){n&&t.currBoard.activities.pop(),t.currBoard.activities.unshift(e)},memberDrag(t,{isDrag:e}){t.isMemberDrag=e},stickerDrag(t,{isDrag:e}){t.isStickerDrag=e},setOnlineUsersOnBoard(t,{users:e}){t.onlineUsersOnBoard=e}},actions:{async loadBoards({commit:t}){t({type:"setIsLoading",isLoading:!0});try{var e=await A.query({});t({type:"setBoards",boards:e}),z.off(be),z.on(be,n=>{t({type:"saveBoard",board:n})})}catch(n){throw console.error("Cannot Load boards",n),n}finally{t({type:"setIsLoading",isLoading:!1})}},async setCurrBoard({commit:t},{boardId:e}){try{const n=await A.getBoardById(e);return t({type:"setCurrBoard",board:n}),n}catch(n){throw console.log("Cannot find board",n),n}},async removeBoard({commit:t},{id:e}){try{var e=await A.removeBoard(e);t({type:"removeBoard",id:e})}catch(n){throw console.error("Cannot remove board",n),n}},async saveBoard({commit:t},{board:e}){try{var e=await A.updateBoard(e);return t({type:"saveBoard",board:e}),e}catch(n){throw console.error("Cannot Edit/Add board",n),n}finally{}},async filterBoard({commit:t},{boardId:e,filterBy:n}){try{const l=await A.getBoardById(e,n);t({type:"saveBoard",board:l})}catch(l){throw console.log("Cannot find card",l),l}},async addGroup({commit:t,state:e},{title:n}){try{const l=await V.addGroup(e.currBoard._id,n);console.log("store addGroup board",l),t({type:"saveBoard",board:l})}catch(l){throw console.log("Cannot add group",l),l}},async addCard({commit:t,state:e},{groupId:n,title:l}){try{const o=await V.addCard(e.currBoard._id,n,l);t({type:"saveBoard",board:o})}catch(o){throw console.log("Cannot add card",o),o}},async removeGroup({commit:t,state:e},{groupId:n}){try{const l=await V.removeGroup(e.currBoard._id,n);t({type:"saveBoard",board:l})}catch(l){throw console.log("Cannot remove group",l),l}},async removeCard({commit:t,state:e},{groupId:n,cardId:l}){try{const o=await V.removeCard(e.currBoard._id,n,l);t({type:"saveBoard",board:o})}catch(o){throw console.log("Cannot remove group",o),o}},async updateCard({commit:t,state:e},{groupId:n,card:l}){try{const o=await V.updateCard(e.currBoard._id,n,l);t({type:"saveBoard",board:o})}catch(o){throw console.log("Cannot update card",o),o}},async getCardById({commit:t},{boardId:e,cardId:n}){try{return await V.getCardById(e,n)}catch(l){throw console.log("Cannot find card",l),l}},async addActivity({commit:t,getters:e,dispatch:n},{txt:l,card:o}){var d,c,_;const r=e.currBoard.activities.length>100,p={id:G.makeId(),txt:l,createdAt:Date.now(),byMember:{_id:((d=e.loggedinUser)==null?void 0:d._id)||"",fullname:((c=e.loggedinUser)==null?void 0:c.fullname)||"Guest",imgUrl:((_=e.loggedinUser)==null?void 0:_.imgUrl)||""},card:{id:o.id,title:o.title}};t({type:"addActivity",activity:p,clearAct:r}),await n({type:"saveBoard",board:e.currBoard})}}},Hm={state:{loggedinUser:F.getLoggedinUser(),users:[]},getters:{users({users:t}){return t},loggedinUser({loggedinUser:t}){return t}},mutations:{setLoggedinUser(t,{user:e}){t.loggedinUser=e?ve({},e):null},setUsers(t,{users:e}){t.users=e}},actions:{async loadUsers({commit:t}){try{const e=await F.getUsers();t({type:"setUsers",users:e})}catch(e){throw console.log("Error load users",e),e}},async login({commit:t},{userCred:e}){try{const n=await F.login(e);return t({type:"setLoggedinUser",user:n}),n}catch(n){throw console.log("cannot set user",n),n}},async logout({commit:t}){try{await F.logout(),t({type:"setLoggedinUser",user:null})}catch(e){console.log("logout failed",e)}},async signup({commit:t},{userCred:e}){try{const n=await F.signup(e);t({type:"setLoggedinUser",user:n})}catch(n){throw console.log("signup failed",n),n}}}};const Qm=ze({strict:!0,state:{isLoading:!1},getters:{isLoading(t){return t.isLoading}},mutations:{setIsLoading(t,{isLoading:e}){t.isLoading=e}},actions:{},modules:{boardModules:Rm,userModules:Hm}});const Km={mounted:t=>{t.focus()}},qm={beforeMount(t,e,n){t.clickOutsideEvent=l=>{t===l.target||t.contains(l.target)||e.value(l,t)},window.requestAnimationFrame(()=>{document.addEventListener("click",t.clickOutsideEvent)})},unmounted(t){document.removeEventListener("click",t.clickOutsideEvent)}};function zm(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:l,onRegistered:o,onRegisterError:r}=t;let p;const d=async(c=!0)=>{};return"serviceWorker"in navigator&&(p=new We("/sw.js",{scope:"/",type:"classic"}),p.addEventListener("activated",c=>{c.isUpdate?window.location.reload():l==null||l()}),p.register({immediate:e}).then(c=>{o==null||o(c)}).catch(c=>{r==null||r(c)})),d}let Wm="438420074378-5cu9up50dsabv90v8ak9p72vrmfgdaod.apps.googleusercontent.com";const W=Ye(ot);W.directive("focus",Km);W.directive("click-outside",qm);zm({immediate:!0});W.use(Xe,{clientId:Wm,scope:"email",prompt:"consent"});W.use(Ze,{});W.use(Oe);W.use(Qm);W.mount("#app");
